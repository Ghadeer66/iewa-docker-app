import{_ as E,F as N}from"./Footer-C5ajxOsx.js";import{y as L,r as c,i as U,e as l,j as d,o as r,a as t,l as w,d as u,v as m,n as p,t as i,m as j,G as A,k as S,b as h,g as $,q as V,h as B}from"./app-Cg0gBEvb.js";const P={key:0,class:"fixed inset-0 flex justify-center items-center bg-black/50 backdrop-blur-lg z-50"},z={key:0,class:"bg-white/10 backdrop-blur-xl rounded-3xl shadow-2xl p-8 w-[400px] border border-white/20"},D={key:0,class:"text-red-400 text-xs mt-1"},G={key:0,class:"text-red-400 text-xs mt-1"},T={key:0,class:"text-red-400 text-xs mt-1"},q={key:0,class:"text-red-400 text-xs mt-1"},R={key:0,class:"text-red-400 text-xs mt-1"},H={key:0,class:"text-red-400 text-xs mt-1"},I={key:0,class:"text-red-400 text-xs mt-1"},J={class:"flex items-center"},K={key:0,class:"text-red-400 text-xs mt-1"},O={key:1,class:"bg-red-500/20 border border-red-500 text-red-300 p-3 rounded-xl text-sm text-center"},Q=["disabled"],W={key:0},X={key:1},Y={class:"text-center text-sm mt-3 text-gray-400"},Z={key:1,class:"bg-white/10 backdrop-blur-xl rounded-3xl shadow-2xl p-8 w-[380px] border border-white/20"},ee={key:0,class:"text-red-400 text-xs mt-1"},te={key:0,class:"text-red-400 text-xs mt-1"},oe={class:"flex items-center"},se={key:0,class:"bg-red-500/20 border border-red-500 text-red-300 p-3 rounded-xl text-sm text-center"},le=["disabled"],re={key:0},ae={key:1},ne={class:"flex justify-between text-sm mt-3 text-gray-400"},de={__name:"GlobalAuthModal",setup(F){const _=L(()=>{const n=window.location.pathname;return!["/login","/register","/forgot-password"].includes(n)}),k=c(!1),g=c(!1),v=c(!1),y=c(""),f=c(""),o=c({}),x=c({}),a=U({name:"",personal_code:"",phone:"",position:"",email:"",password:"",password_confirmation:"",terms:!1}),b=U({phone:"",password:"",remember:!1}),M=async()=>{g.value=!0,y.value="",o.value={};try{await $.post("/register",a,{onSuccess:()=>{console.log("Registration successful")},onError:n=>{n.errors&&(o.value=n.errors),y.value=n.message||"خطا در ثبت‌نام. لطفا مجددا تلاش کنید."},onFinish:()=>{g.value=!1}})}catch{y.value="خطا در ارتباط با سرور",g.value=!1}},C=async()=>{v.value=!0,f.value="",x.value={};try{await $.post("/login",b,{onSuccess:()=>{console.log("Login successful")},onError:n=>{n.errors&&(x.value=n.errors),f.value=n.message||"خطا در ورود. لطفا مجددا تلاش کنید."},onFinish:()=>{v.value=!1}})}catch{f.value="خطا در ارتباط با سرور",v.value=!1}};return(n,e)=>!n.$page.props.auth.user&&_.value?(r(),l("div",P,[k.value?(r(),l("div",Z,[e[28]||(e[28]=t("h1",{class:"text-2xl text-center text-lime-300 font-semibold mb-6"}," ورود به حساب ایوا ",-1)),t("form",{onSubmit:h(C,["prevent"]),class:"space-y-5"},[t("div",null,[e[24]||(e[24]=t("label",{class:"text-gray-300 text-sm mb-1 block"},"شماره همراه یا کد پرسنلی",-1)),u(t("input",{type:"text","onUpdate:modelValue":e[9]||(e[9]=s=>b.phone=s),placeholder:"09xxxxxxxxx یا کد پرسنلی",class:p(["w-full px-4 py-2 bg-gray-800 text-white rounded-xl border border-gray-700 focus:ring-2 focus:ring-lime-400 outline-none",{"border-red-500":x.value.phone}])},null,2),[[m,b.phone]]),x.value.phone?(r(),l("p",ee,i(x.value.phone[0]),1)):d("",!0)]),t("div",null,[e[25]||(e[25]=t("label",{class:"text-gray-300 text-sm mb-1 block"},"رمز عبور",-1)),u(t("input",{type:"password","onUpdate:modelValue":e[10]||(e[10]=s=>b.password=s),placeholder:"رمز خود را وارد کنید",class:p(["w-full px-4 py-2 bg-gray-800 text-white rounded-xl border border-gray-700 focus:ring-2 focus:ring-lime-400 outline-none",{"border-red-500":x.value.password}])},null,2),[[m,b.password]]),x.value.password?(r(),l("p",te,i(x.value.password[0]),1)):d("",!0)]),t("div",oe,[u(t("input",{id:"remember","onUpdate:modelValue":e[11]||(e[11]=s=>b.remember=s),type:"checkbox",class:"h-4 w-4 text-lime-600 focus:ring-lime-500 border-gray-300 rounded"},null,512),[[S,b.remember]]),e[26]||(e[26]=t("label",{for:"remember",class:"mr-2 block text-sm text-gray-300"}," مرا به خاطر بسپار ",-1))]),f.value?(r(),l("div",se,i(f.value),1)):d("",!0),t("button",{type:"submit",disabled:v.value,class:"w-full py-3 rounded-xl bg-lime-400 text-gray-900 font-semibold hover:bg-lime-300 transition disabled:opacity-50 disabled:cursor-not-allowed"},[v.value?(r(),l("span",re,"در حال ورود...")):(r(),l("span",ae,"ورود"))],8,le),t("div",ne,[e[27]||(e[27]=t("a",{href:"/forgot-password",class:"hover:text-lime-400 transition"},"رمز عبور را فراموش کرده‌اید؟",-1)),t("a",{href:"#",onClick:e[12]||(e[12]=h(s=>k.value=!1,["prevent"])),class:"hover:text-lime-400 transition"},"ثبت‌نام کنید")])],32)])):(r(),l("div",z,[e[23]||(e[23]=t("h1",{class:"text-2xl text-center text-lime-300 font-semibold mb-6"},[w(" فرم ثبت‌نام پرسنل انتخاب"),t("br"),w("در ایوا ")],-1)),t("form",{onSubmit:h(M,["prevent"]),class:"space-y-5"},[t("div",null,[e[13]||(e[13]=t("label",{class:"text-gray-300 text-sm mb-1 block"},"نام کامل",-1)),u(t("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=s=>a.name=s),placeholder:"مثلاً علی رضایی",class:p(["w-full px-4 py-2 bg-gray-800 text-white rounded-xl border border-gray-700 focus:ring-2 focus:ring-lime-400 outline-none",{"border-red-500":o.value.name}])},null,2),[[m,a.name]]),o.value.name?(r(),l("p",D,i(o.value.name[0]),1)):d("",!0)]),t("div",null,[e[14]||(e[14]=t("label",{class:"text-gray-300 text-sm mb-1 block"},"کد پرسنلی",-1)),u(t("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=s=>a.personal_code=s),placeholder:"کد خود را وارد کنید",class:p(["w-full px-4 py-2 bg-gray-800 text-white rounded-xl border border-gray-700 focus:ring-2 focus:ring-lime-400 outline-none",{"border-red-500":o.value.personal_code}])},null,2),[[m,a.personal_code]]),o.value.personal_code?(r(),l("p",G,i(o.value.personal_code[0]),1)):d("",!0)]),t("div",null,[e[15]||(e[15]=t("label",{class:"text-gray-300 text-sm mb-1 block"},"شماره تماس",-1)),u(t("input",{type:"text","onUpdate:modelValue":e[2]||(e[2]=s=>a.phone=s),placeholder:"09xxxxxxxxx",class:p(["w-full px-4 py-2 bg-gray-800 text-white rounded-xl border border-gray-700 focus:ring-2 focus:ring-lime-400 outline-none",{"border-red-500":o.value.phone}])},null,2),[[m,a.phone]]),o.value.phone?(r(),l("p",T,i(o.value.phone[0]),1)):d("",!0)]),t("div",null,[e[17]||(e[17]=t("label",{class:"text-gray-300 text-sm mb-1 block"},"پوزیشن سازمان",-1)),u(t("select",{"onUpdate:modelValue":e[3]||(e[3]=s=>a.position=s),class:p(["w-full px-4 py-2 bg-gray-800 text-white rounded-xl border border-gray-700 focus:ring-2 focus:ring-lime-400 outline-none",{"border-red-500":o.value.position}])},e[16]||(e[16]=[A('<option value="" disabled selected>پوزیشن خود را انتخاب کنید</option><option value="manager">مدیر</option><option value="supervisor">سرپرست</option><option value="employee">کارمند</option><option value="operator">اپراتور</option>',5)]),2),[[j,a.position]]),o.value.position?(r(),l("p",q,i(o.value.position[0]),1)):d("",!0)]),t("div",null,[e[18]||(e[18]=t("label",{class:"text-gray-300 text-sm mb-1 block"},"ایمیل (اختیاری)",-1)),u(t("input",{type:"email","onUpdate:modelValue":e[4]||(e[4]=s=>a.email=s),placeholder:"example@domain.com",class:p(["w-full px-4 py-2 bg-gray-800 text-white rounded-xl border border-gray-700 focus:ring-2 focus:ring-lime-400 outline-none",{"border-red-500":o.value.email}])},null,2),[[m,a.email]]),o.value.email?(r(),l("p",R,i(o.value.email[0]),1)):d("",!0)]),t("div",null,[e[19]||(e[19]=t("label",{class:"text-gray-300 text-sm mb-1 block"},"رمز عبور",-1)),u(t("input",{type:"password","onUpdate:modelValue":e[5]||(e[5]=s=>a.password=s),placeholder:"رمز عبور خود را وارد کنید",class:p(["w-full px-4 py-2 bg-gray-800 text-white rounded-xl border border-gray-700 focus:ring-2 focus:ring-lime-400 outline-none",{"border-red-500":o.value.password}])},null,2),[[m,a.password]]),o.value.password?(r(),l("p",H,i(o.value.password[0]),1)):d("",!0)]),t("div",null,[e[20]||(e[20]=t("label",{class:"text-gray-300 text-sm mb-1 block"},"تکرار رمز عبور",-1)),u(t("input",{type:"password","onUpdate:modelValue":e[6]||(e[6]=s=>a.password_confirmation=s),placeholder:"رمز عبور خود را مجدداً وارد کنید",class:p(["w-full px-4 py-2 bg-gray-800 text-white rounded-xl border border-gray-700 focus:ring-2 focus:ring-lime-400 outline-none",{"border-red-500":o.value.password_confirmation}])},null,2),[[m,a.password_confirmation]]),o.value.password_confirmation?(r(),l("p",I,i(o.value.password_confirmation[0]),1)):d("",!0)]),t("div",J,[u(t("input",{id:"terms","onUpdate:modelValue":e[7]||(e[7]=s=>a.terms=s),type:"checkbox",class:p(["h-4 w-4 text-lime-600 focus:ring-lime-500 border-gray-300 rounded",{"border-red-500":o.value.terms}])},null,2),[[S,a.terms]]),e[21]||(e[21]=t("label",{for:"terms",class:"mr-2 block text-sm text-gray-300"},[w(" با "),t("a",{href:"#",class:"text-lime-400 hover:text-lime-300"},"قوانین و مقررات"),w(" موافقم ")],-1))]),o.value.terms?(r(),l("p",K,i(o.value.terms[0]),1)):d("",!0),y.value?(r(),l("div",O,i(y.value),1)):d("",!0),t("button",{type:"submit",disabled:g.value,class:"w-full py-3 rounded-xl bg-lime-400 text-gray-900 font-semibold hover:bg-lime-300 transition disabled:opacity-50 disabled:cursor-not-allowed"},[g.value?(r(),l("span",W,"در حال ثبت‌نام...")):(r(),l("span",X,"ثبت‌نام"))],8,Q),t("div",Y,[e[22]||(e[22]=w(" قبلاً حساب دارید؟ ",-1)),t("a",{href:"#",onClick:e[8]||(e[8]=h(s=>k.value=!0,["prevent"])),class:"hover:text-lime-400 transition"},"ورود")])],32)]))])):d("",!0)}},ie={class:"min-h-screen flex flex-col bg-gray-50 text-gray-900"},ue={class:"flex-1"},me={__name:"AppLayout",setup(F){return(_,k)=>(r(),l("div",ie,[V(E),t("main",ue,[B(_.$slots,"default")]),V(N),V(de)]))}};export{me as _};

import{c as H,g as U,u as G,a as z}from"./useForwardPropsEmits-DU17A9Nt.js";import{P as $,c as R}from"./index-C-6HtbAG.js";import{r as S}from"./index-HlrO4CQE.js";import{q as j,c as y,d as B,S as L,z as K,f as k,o as C,w as A,D as M,e as X,u as r,m as D,B as J,C as Q,G as N,E as W}from"./app-Bez4vT0V.js";import{V as Y,u as Z}from"./VisuallyHiddenInput-CtrQKN_x.js";import{i as ee}from"./ConfigProvider-DUwQRPkv.js";import{a as te,b as ae}from"./useForwardExpose-BMn-282H.js";const le=["INPUT","TEXTAREA"];function ne(l,n,t,o={}){if(!n||o.enableIgnoredElement&&le.includes(n.nodeName))return null;const{arrowKeyOptions:s="both",attributeName:d="[data-reka-collection-item]",itemsArray:g=[],loop:c=!0,dir:b="ltr",preventScroll:x=!0,focus:q=!1}=o,[_,f,P,h,I,V]=[l.key==="ArrowRight",l.key==="ArrowLeft",l.key==="ArrowUp",l.key==="ArrowDown",l.key==="Home",l.key==="End"],v=P||h,i=_||f;if(!I&&!V&&(!v&&!i||s==="vertical"&&i||s==="horizontal"&&v))return null;const p=g;if(!p.length)return null;x&&l.preventDefault();let m=null;return i||v?m=O(p,n,{goForward:v?h:b==="ltr"?_:f,loop:c}):I?m=p.at(0)||null:V&&(m=p.at(-1)||null),q&&m?.focus(),m}function O(l,n,t,o=l.length){if(--o===0)return null;const s=l.indexOf(n),d=t.goForward?s+1:s-1;if(!t.loop&&(d<0||d>=l.length))return null;const g=(d+l.length)%l.length,c=l[g];return c?c.hasAttribute("disabled")&&c.getAttribute("disabled")!=="false"?O(l,c,t,o):c:null}function oe(l){const n=ee({dir:j("ltr")});return y(()=>l?.value||n.dir?.value||"ltr")}const[re,se]=H("PinInputRoot");var ue=B({inheritAttrs:!1,__name:"PinInputRoot",props:{modelValue:{type:null,required:!1},defaultValue:{type:Array,required:!1},placeholder:{type:String,required:!1,default:""},mask:{type:Boolean,required:!1},otp:{type:Boolean,required:!1},type:{type:null,required:!1,default:"text"},dir:{type:String,required:!1},disabled:{type:Boolean,required:!1},id:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},name:{type:String,required:!1},required:{type:Boolean,required:!1}},emits:["update:modelValue","complete"],setup(l,{emit:n}){const t=l,o=n,{mask:s,otp:d,placeholder:g,type:c,disabled:b,dir:x}=L(t),{forwardRef:q}=te(),_=oe(x),f=ae(t,"modelValue",o,{defaultValue:t.defaultValue??[],passive:t.modelValue===void 0}),P=y(()=>Array.isArray(f.value)?[...f.value]:[]),h=j(new Set);function I(i){h.value.add(i)}const V=y(()=>t.type==="number"),v=y(()=>P.value.filter(p=>!!p||V.value&&p===0).length===h.value.size);return K(f,()=>{v.value&&o("complete",f.value)},{deep:!0}),se({modelValue:f,currentModelValue:P,mask:s,otp:d,placeholder:g,type:c,dir:_,disabled:b,isCompleted:v,inputElements:h,onInputElementChange:I,isNumericMode:V}),(i,p)=>(C(),k(r($),D(i.$attrs,{ref:r(q),dir:r(_),"data-complete":v.value?"":void 0,"data-disabled":r(b)?"":void 0}),{default:A(()=>[M(i.$slots,"default",{modelValue:r(f)}),X(Y,{id:i.id,as:"input",feature:"focusable",tabindex:"-1",value:P.value.join(""),name:i.name??"",disabled:r(b),required:i.required,onFocus:p[0]||(p[0]=m=>Array.from(h.value)?.[0]?.focus())},null,8,["id","value","name","disabled","required"])]),_:3},16,["dir","data-complete","data-disabled"]))}}),ie=ue,de=B({__name:"PinInputInput",props:{index:{type:Number,required:!0},disabled:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"input"}},setup(l){const n=l,t=re(),o=y(()=>Array.from(t.inputElements.value)),s=y(()=>t.currentModelValue.value[n.index]),d=y(()=>n.disabled||t.disabled.value),g=y(()=>t.otp.value),c=y(()=>t.mask.value),{primitiveElement:b,currentElement:x}=Z();function q(e){const a=e.target;if((e.data?.length??0)>1){i(a.value);return}if(t.isNumericMode.value&&!/^\d*$/.test(a.value)){a.value=a.value.replace(/\D/g,"");return}a.value=e.data??"",m(n.index,a.value);const u=o.value[n.index+1];u&&u.focus()}function _(){const e=x.value;W(()=>{e&&!e.value&&(e.placeholder=t.placeholder.value)})}function f(e){ne(e,U(),void 0,{itemsArray:o.value,focus:!0,loop:!1,arrowKeyOptions:"horizontal",dir:t.dir.value})}function P(e){if(e.preventDefault(),e.target.value)m(n.index,"");else{const w=o.value[n.index-1];w&&(w.focus(),m(n.index-1,""))}}function h(e){e.key==="Delete"&&(e.preventDefault(),m(n.index,""))}function I(e){const a=e.target;a.setSelectionRange(1,1),a.value||(a.placeholder="")}function V(e){_()}function v(e){e.preventDefault();const a=e.clipboardData;if(!a)return;const u=a.getData("text");i(u)}function i(e){const a=[...t.currentModelValue.value],u=e.length>=o.value.length?0:n.index,w=Math.min(u+e.length,o.value.length);for(let E=u;E<w;E++){const T=o.value[E],F=e[E-u];t.isNumericMode.value&&!/^\d*$/.test(F)||(a[E]=F,T.focus())}t.modelValue.value=a,o.value[w]?.focus()}function p(e){let a=e.length-1;for(;a>=0&&e[a]==="";)e.pop(),a--;return e}function m(e,a){const u=[...t.currentModelValue.value];if(t.isNumericMode.value){const w=+a;a===""||isNaN(w)?delete u[e]:u[e]=w}else u[e]=a;t.modelValue.value=p(u)}return K(s,()=>{s.value||_()}),J(()=>{t.onInputElementChange(x.value)}),Q(()=>{t.inputElements?.value.delete(x.value)}),(e,a)=>(C(),k(r($),{ref_key:"primitiveElement",ref:b,autocapitalize:"none",as:e.as,"as-child":e.asChild,autocomplete:g.value?"one-time-code":"false",type:c.value?"password":"text",inputmode:r(t).isNumericMode.value?"numeric":"text",pattern:r(t).isNumericMode.value?"[0-9]*":void 0,placeholder:r(t).placeholder.value,value:s.value,disabled:d.value,"data-disabled":d.value?"":void 0,"data-complete":r(t).isCompleted.value?"":void 0,"aria-label":`pin input ${e.index+1} of ${o.value.length}`,onInput:a[0]||(a[0]=u=>q(u)),onKeydown:[N(f,["left","right","up","down","home","end"]),N(P,["backspace"]),N(h,["delete"])],onFocus:I,onBlur:V,onPaste:v},{default:A(()=>[M(e.$slots,"default")]),_:3},8,["as","as-child","autocomplete","type","inputmode","pattern","placeholder","value","disabled","data-disabled","data-complete","aria-label"]))}}),ce=de;const be=B({__name:"PinInput",props:{modelValue:{default:()=>[]},defaultValue:{},placeholder:{},mask:{type:Boolean},otp:{type:Boolean},type:{},dir:{},disabled:{type:Boolean},id:{},asChild:{type:Boolean},as:{},name:{},required:{type:Boolean},class:{}},emits:["update:modelValue","complete"],setup(l,{emit:n}){const t=l,o=n,s=S(t,"class"),d=G(s,o);return(g,c)=>(C(),k(r(ie),D({"data-slot":"pin-input"},r(d),{class:r(R)("flex items-center gap-2 has-disabled:opacity-50 disabled:cursor-not-allowed",t.class)}),{default:A(()=>[M(g.$slots,"default")]),_:3},16,["class"]))}}),_e=B({__name:"PinInputGroup",props:{asChild:{type:Boolean},as:{},class:{}},setup(l){const n=l,t=S(n,"class"),o=z(t);return(s,d)=>(C(),k(r($),D({"data-slot":"pin-input-group"},r(o),{class:r(R)("flex items-center",n.class)}),{default:A(()=>[M(s.$slots,"default")]),_:3},16,["class"]))}}),we=B({__name:"PinInputSlot",props:{index:{},disabled:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},setup(l){const n=l,t=S(n,"class"),o=z(t);return(s,d)=>(C(),k(r(ce),D({"data-slot":"pin-input-slot"},r(o),{class:r(R)("border-input focus:border-ring focus:ring-ring/50 focus:aria-invalid:ring-destructive/20 dark:bg-input/30 dark:focus:aria-invalid:ring-destructive/40 aria-invalid:border-destructive focus:aria-invalid:border-destructive relative flex h-9 w-9 items-center justify-center border-y border-r text-sm shadow-xs transition-all outline-none text-center first:rounded-l-md first:border-l last:rounded-r-md focus:z-10 focus:ring-[3px]",n.class)}),null,16,["class"]))}});export{be as _,_e as a,we as b};

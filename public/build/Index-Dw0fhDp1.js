import{_ as ee}from"./AppLayout-De4x4EM8.js";import{r as k,b as V,e as i,o as r,a as e,f as S,t as m,n as I,F as J,h as A,g as te,B as ae,C as le,s as se,w as Q,T as re,H as ne,c as H,i as R,u as G}from"./app-B0552H22.js";import{_ as oe}from"./RulesButton-D0_opJxl.js";import{_ as K}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./Footer-_Tt_o0JH.js";const ie={class:"meal-card bg-white rounded-2xl shadow-md hover:shadow-lg transition overflow-hidden border border-gray-200 flex flex-col relative"},ue={class:"relative w-full bg-gray-100"},ce=["src","alt"],de={key:0,class:"absolute top-3 left-3 bg-green-600 text-white text-xs font-semibold px-3 py-1 rounded-full shadow"},ge={class:"p-4 flex flex-col flex-grow"},fe={class:"flex justify-between items-center gap-4 bg-orange-100 p-3 rounded-xl mb-3"},be={class:"font-bold text-gray-800 text-md"},ve={class:"font-bold text-orange-500 text-md"},ye={class:"flex justify-center items-center gap-2 mb-3"},me={class:"font-semibold text-green-600 text-base"},pe={class:"flex justify-center mb-3"},xe={class:"flex items-center justify-center gap-4 p-1 border border-gray-200 rounded-2xl w-40"},he=["disabled"],we={class:"text-lg font-semibold"},ke={class:"flex-1 overflow-y-auto p-6 space-y-4"},_e={class:"flex justify-between items-center border-b border-gray-200 pb-2 mb-4"},De={class:"text-xl font-semibold text-gray-800"},$e={key:0,class:"relative w-full"},je=["src","alt"],Ce={class:"absolute bottom-2 left-1/2 -translate-x-1/2 flex gap-2"},Se=["onClick"],Te=["src","alt"],Pe={class:"bg-gray-50 p-4 rounded-lg border border-gray-200"},Me={class:"space-y-1 text-gray-600 text-sm"},Le={class:"flex items-center justify-center gap-4 p-3 border border-gray-200 rounded-lg"},Oe=["disabled"],Je={class:"text-lg font-semibold"},Ae=["disabled"],Ie={class:"bg-gray-50 p-4 rounded-lg border border-gray-200"},Fe={class:"list-disc list-inside text-gray-600 text-sm"},Be={class:"bg-gray-50 p-4 rounded-lg border border-gray-200"},We={class:"list-disc list-inside text-gray-600 text-sm"},ze={class:"bg-gray-50 p-4 rounded-lg border border-gray-200"},Ee={class:"list-disc list-inside text-gray-600 text-sm"},Ne={class:"bg-gray-50 p-4 rounded-lg border border-gray-200"},Ve={class:"list-disc list-inside text-gray-600 text-sm"},Ye={class:"w-80 border-l border-gray-200 bg-gray-50 p-4 flex flex-col"},Re={class:"flex-1 space-y-3 overflow-y-auto"},qe={class:"flex-shrink-0"},He={class:"w-10 h-10 rounded-full bg-lime-400 flex items-center justify-center text-white text-lg font-bold"},Ue={class:"flex flex-col"},Ge={class:"font-semibold text-gray-800"},Xe={class:"text-gray-600 text-sm"},Qe={__name:"MealCard",props:{meal:Object,isAuthenticated:{type:Boolean,default:!1}},emits:["open-calendar"],setup(s,{emit:E}){const j=s,T=k(!1),x=k(1),P={Ø±ÙˆØ²Ø§Ù†Ù‡:0,Ù‡ÙØªÚ¯ÛŒ:.2,Ù…Ø§Ù‡Ø§Ù†Ù‡:.4},N=V(()=>{const u=j.meal.price||0;return Math.round(u*(1-P.Ø±ÙˆØ²Ø§Ù†Ù‡)*x.value)}),F=V(()=>{const u=j.meal.price||0;return Object.entries(P).map(([o,t])=>({plan:o,discountPercent:t*100,priceAfterDiscount:Math.round(u*(1-t)*x.value)}))}),h=()=>{T.value=!0},C=()=>{T.value=!1},_=()=>{x.value++},$=()=>{x.value>1&&x.value--},L=E,O=()=>{L("open-calendar",{basePrice:N.value})},g=k([{user:"Ù†ÛŒÙ„ÙˆÙØ± Ø²Ù…Ø§Ù†ÛŒ",text:"Ú©ÛŒÙÛŒØª ÙÙˆÙ‚ Ø§Ù„Ø¹Ø§Ø¯Ù‡ Ú©Ø§Ù…Ù„Ø§ ØªØ§Ø²Ù‡"},{user:"Ù†ÛŒÙ„ÙˆÙØ± Ø´Ú©Ø±Ø§Ù†Ù‡ Ø§Ù‚Ø¯Ø§Ù…",text:"ÙˆØ§Ù„Ø§ Ø®ÙˆØ´Ù…Ø²Ù‡ Ùˆ Ø¹Ø§Ù„ÛŒ Ø¨ÙˆØ¯ Ø¢Ø¯Ù… Ø§Ø²Ø´ Ø³ÛŒØ± Ù†Ù…ÛŒØ´Ù‡"},{user:"Ø´ÛŒÙ…Ø§ Ø·ÙˆØ³ÛŒ",text:"ÙˆØ§Ù‚Ø¹Ø§ Ø¹Ø§Ù„ÛŒ Ùˆ Ø¨ÛŒÙ†Ø¸ÛŒØ± Ø¨ÙˆØ¯"},{user:"Ø¢ÛŒØ¯Ø§ Ø·Ø§Ù„Ø¨ÛŒ",text:"Ø³Ø§Ù„Ø§Ø¯ Ù‡Ø§ Ù‡Ù…ÛŒØ´Ù‡ Ø®ÛŒÙ„ÛŒ ØªØ§Ø²Ù‡ Ùˆ ÙØ±Ø´ Ù‡Ø³Øª Ù„Ø·ÙØ§ Ù‡Ù…ÛŒÙ† Ø¬ÙˆØ±ÛŒ Ø¨Ù…ÙˆÙ†ÛŒØ¯"},{user:"Ù†ÛŒÙ„ÙˆÙØ± Ø­Ø¯Ø§Ø¯ÛŒØ§Ù†",text:"Ø¯Ø®ØªØ±Ù… Ø§Ø² Ù…Ø´ØªØ±ÛŒ Ù‡Ø§ÛŒ Ø´Ù…Ø§Ø³Øª Ùˆ ÙˆØ§Ù‚Ø¹Ø§ Ø§Ø² Ø®ÙˆØ±Ø¯Ù† ØºØ°Ø§Ù‡Ø§ÛŒ Ø´Ù…Ø§ Ù„Ø°Øª Ù…ÛŒØ¨Ø±Ù‡"},{user:"Ù…Ø±ØªØ¶ÛŒ Ù¾ÛŒØ±ÙˆØ§Ù†ÛŒ",text:"ØªÙ†ÙˆØ¹ ØºØ°Ø§Ù‡Ø§ Ø®ÙˆØ¨Ù‡ Ø§ÛŒÙ† Ø³Ø§Ù„Ø§Ø¯ Ùˆ Ù…Ù† Ø§Ø² Ø¨ÙˆØªÛŒÚ© Ú¯Ø±ÙØªÙ‡ Ø¨ÙˆØ¯Ù…"}]),f=V(()=>{const u=Array.isArray(j.meal?.images)?j.meal.images.map(o=>{const t=o?.url;return t?t.startsWith("http://")||t.startsWith("https://")||t.startsWith("/")?t:`/${t}`:null}).filter(Boolean):[];return u.length===0&&j.meal?.image_url?[j.meal.image_url]:u}),l=k(0),n=()=>{f.value.length>0&&(l.value=(l.value+1)%f.value.length)},d=()=>{f.value.length>0&&(l.value=(l.value-1+f.value.length)%f.value.length)},v=u=>{u>=0&&u<f.value.length&&(l.value=u)};return(u,o)=>(r(),i("div",ie,[e("div",ue,[e("img",{src:s.meal.thumbnail_url??s.meal.image_url??(s.meal.image?`/${s.meal.image}`:"/images/placeholder.png"),alt:s.meal.title||"meal",class:"w-full object-cover rounded-t-2xl",style:{"aspect-ratio":"3 / 2"}},null,8,ce),s.meal.is_new?(r(),i("span",de," Ø¬Ø¯ÛŒØ¯ ")):S("",!0)]),e("div",ge,[e("div",fe,[e("h3",be,m(s.meal.title),1),e("h3",ve,m(s.meal.kcal)+" Ú©Ø§Ù„Ø±ÛŒ ",1)]),e("div",ye,[o[1]||(o[1]=e("span",{class:"text-sm text-gray-500"},"Ù‚ÛŒÙ…Øª:",-1)),e("span",me,m(N.value.toLocaleString())+" ØªÙˆÙ…Ø§Ù†",1)]),e("div",pe,[e("div",xe,[e("button",{onClick:$,disabled:x.value<=1,class:I([x.value>1?"bg-gray-200 text-gray-600 hover:bg-gray-300":"bg-gray-100 text-gray-400 cursor-not-allowed","w-8 h-8 rounded-full transition flex items-center justify-center"])},"-",10,he),e("span",we,m(x.value),1),e("button",{onClick:_,class:"w-8 h-8 rounded-full bg-gray-200 text-gray-600 hover:bg-gray-300 transition flex items-center justify-center"},"+")])]),e("div",{class:"flex justify-center gap-3"},[e("button",{onClick:h,class:"bg-yellow-100 text-yellow-700 border border-yellow-300 px-4 py-1 rounded-md text-sm hover:bg-yellow-200 transition cursor-pointer"}," Ø¬Ø²Ø¦ÛŒØ§Øª Ø¨ÛŒØ´ØªØ± "),e("button",{onClick:O,class:"px-4 py-2 rounded-md text-sm transition bg-green-500 text-white hover:bg-green-600"}," Ø§Ù†ØªØ®Ø§Ø¨ Ø±ÙˆØ² ")])]),T.value?(r(),i("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm",onClick:C},[e("div",{onClick:o[0]||(o[0]=te(()=>{},["stop"])),class:"bg-white rounded-xl shadow-xl w-full max-w-5xl max-h-[85vh] overflow-hidden border border-gray-200 flex"},[e("div",ke,[e("div",_e,[e("button",{onClick:C,class:"text-gray-500 hover:text-gray-700 text-2xl font-bold cursor-pointer"}," Ã— "),e("h2",De,m(s.meal.title),1)]),f.value.length>1?(r(),i("div",$e,[e("img",{src:f.value[l.value],alt:s.meal.title||"meal",class:"w-full object-cover rounded-lg shadow-sm",style:{"aspect-ratio":"3 / 2"}},null,8,je),e("button",{onClick:d,class:"absolute left-2 top-1/2 -translate-y-1/2 bg-black/40 text-white w-8 h-8 rounded-full flex items-center justify-center"},"â€¹"),e("button",{onClick:n,class:"absolute right-2 top-1/2 -translate-y-1/2 bg-black/40 text-white w-8 h-8 rounded-full flex items-center justify-center"},"â€º"),e("div",Ce,[(r(!0),i(J,null,A(f.value,(t,a)=>(r(),i("button",{key:a,onClick:b=>v(a),class:I([a===l.value?"bg-white":"bg-white/50","w-2.5 h-2.5 rounded-full"])},null,10,Se))),128))])])):(r(),i("img",{key:1,src:f.value[0]??s.meal.image_url??(s.meal.image?`/${s.meal.image}`:"/images/placeholder.png"),alt:s.meal.title||"meal",class:"w-full object-cover rounded-lg shadow-sm",style:{"aspect-ratio":"3 / 2"}},null,8,Te)),e("div",Pe,[o[2]||(o[2]=e("h3",{class:"font-semibold text-gray-700 mb-2"},"Ø§Ø·Ù„Ø§Ø¹Ø§Øª ØªØºØ°ÛŒÙ‡â€ŒØ§ÛŒ",-1)),e("div",Me,[(r(!0),i(J,null,A(s.meal.nutritional_informations,(t,a)=>(r(),i("div",{key:a,class:"flex justify-between"},[e("span",null,m(a),1),e("span",null,m(t),1)]))),128))])]),e("div",Le,[e("button",{onClick:$,disabled:x.value<=1,class:I([x.value>1?"bg-gray-200 text-gray-600 hover:bg-gray-300":"bg-gray-100 text-gray-400 cursor-not-allowed","w-8 h-8 rounded-full transition flex items-center justify-center"])},"-",10,Oe),e("span",Je,m(x.value),1),e("button",{onClick:_,class:"w-8 h-8 rounded-full bg-gray-200 text-gray-600 hover:bg-gray-300 transition flex items-center justify-center"},"+")]),e("button",{onClick:O,disabled:s.isAuthenticated,class:"w-full bg-green-500 text-white py-3 rounded-md text-sm font-medium hover:bg-green-600 transition disabled:bg-gray-300 disabled:cursor-not-allowed"}," Ø§Ù†ØªØ®Ø§Ø¨ Ø±ÙˆØ² ",8,Ae),e("div",Ie,[o[3]||(o[3]=e("h3",{class:"font-semibold text-gray-700 mb-2"},"Ù…ÙˆØ§Ø±Ø¯ Ù…Ù†Ø¹ Ù…ØµØ±Ù",-1)),e("ul",Fe,[(r(!0),i(J,null,A(s.meal.contraindications,t=>(r(),i("li",{key:t},m(t),1))),128))])]),e("div",Be,[o[4]||(o[4]=e("h3",{class:"font-semibold text-gray-700 mb-2"},"Ù…ÙˆØ§Ø±Ø¯ Ù…ØµØ±Ù",-1)),e("ul",We,[(r(!0),i(J,null,A(s.meal.consumable_items,t=>(r(),i("li",{key:t},m(t),1))),128))])]),e("div",ze,[o[5]||(o[5]=e("h3",{class:"font-semibold text-gray-700 mb-2"},"Ù…Ø­ØªÙˆÛŒØ§Øª",-1)),e("ul",Ee,[(r(!0),i(J,null,A(s.meal.ingredients,t=>(r(),i("li",{key:t.id},m(t.title),1))),128))])]),e("div",Ne,[o[6]||(o[6]=e("h3",{class:"font-semibold text-gray-700 mb-2"},"ðŸ’¡ ØªØ®ÙÛŒÙ Ù¾Ù„Ù†â€ŒÙ‡Ø§",-1)),e("ul",Ve,[(r(!0),i(J,null,A(F.value,t=>(r(),i("li",{key:t.plan},m(t.plan)+": "+m(t.discountPercent)+"Ùª Ù‚ÛŒÙ…Øª Ù¾Ø³ Ø§Ø² ØªØ®ÙÛŒÙ: "+m(t.priceAfterDiscount.toLocaleString())+" ØªÙˆÙ…Ø§Ù† ",1))),128))])])]),e("div",Ye,[o[7]||(o[7]=e("h3",{class:"font-semibold text-gray-800 mb-3"},"Ù†Ø¸Ø±Ø§Øª Ø´Ù…Ø§",-1)),o[8]||(o[8]=e("div",{class:"flex mb-4 gap-2"},[e("input",{type:"text",placeholder:"ØªÙˆ Ù‡Ù… Ù†Ø¸Ø± Ø®ÙˆØ¯Øª Ø±Ùˆ Ø¨Ø²Ø§Ø±...",class:"flex-grow p-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"}),e("button",{class:"bg-black text-white px-4 py-2 rounded-lg hover:bg-gray-800 transition"},"Ø§Ø±Ø³Ø§Ù„ Ù†Ø¸Ø±")],-1)),e("div",Re,[(r(!0),i(J,null,A(g.value,(t,a)=>(r(),i("div",{key:a,class:"flex gap-3 bg-white p-3 rounded-lg border border-gray-200"},[e("div",qe,[e("div",He,m(t.user.charAt(0)),1)]),e("div",Ue,[e("span",Ge,m(t.user),1),e("span",Xe,m(t.text),1)])]))),128))])])])])):S("",!0)]))}};var U,X;function Ke(){if(X)return U;X=1,U={toJalaali:E,toGregorian:j,isValidJalaaliDate:T,isLeapJalaaliYear:x,jalaaliMonthLength:P,jalCal:F,j2d:h,d2j:C,g2d:_,d2g:$,jalaaliToDateObject:O,jalaaliWeek:L};var s=[-61,9,38,199,426,686,756,818,1111,1181,1210,1635,2060,2097,2192,2262,2324,2394,2456,3178];function E(l,n,d){return Object.prototype.toString.call(l)==="[object Date]"&&(d=l.getDate(),n=l.getMonth()+1,l=l.getFullYear()),C(_(l,n,d))}function j(l,n,d){return $(h(l,n,d))}function T(l,n,d){return l>=-61&&l<=3177&&n>=1&&n<=12&&d>=1&&d<=P(l,n)}function x(l){return N(l)===0}function P(l,n){return n<=6?31:n<=11||x(l)?30:29}function N(l){var n=s.length,d=s[0],v,u,o,t,a;if(l<d||l>=s[n-1])throw new Error("Invalid Jalaali year "+l);for(a=1;a<n&&(v=s[a],u=v-d,!(l<v));a+=1)d=v;return t=l-d,u-t<6&&(t=t-u+g(u+4,33)*33),o=f(f(t+1,33)-1,4),o===-1&&(o=4),o}function F(l,n){var d=s.length,v=l+621,u=-14,o=s[0],t,a,b,B,W,M,y;if(l<o||l>=s[d-1])throw new Error("Invalid Jalaali year "+l);for(y=1;y<d&&(t=s[y],a=t-o,!(l<t));y+=1)u=u+g(a,33)*8+g(f(a,33),4),o=t;return M=l-o,u=u+g(M,33)*8+g(f(M,33)+3,4),f(a,33)===4&&a-M===4&&(u+=1),B=g(v,4)-g((g(v,100)+1)*3,4)-150,W=20+u-B,n?{gy:v,march:W}:(a-M<6&&(M=M-a+g(a+4,33)*33),b=f(f(M+1,33)-1,4),b===-1&&(b=4),{leap:b,gy:v,march:W})}function h(l,n,d){var v=F(l,!0);return _(v.gy,3,v.march)+(n-1)*31-g(n,7)*(n-7)+d-1}function C(l){var n=$(l).gy,d=n-621,v=F(d,!1),u=_(n,3,v.march),o,t,a;if(a=l-u,a>=0){if(a<=185)return t=1+g(a,31),o=f(a,31)+1,{jy:d,jm:t,jd:o};a-=186}else d-=1,a+=179,v.leap===1&&(a+=1);return t=7+g(a,30),o=f(a,30)+1,{jy:d,jm:t,jd:o}}function _(l,n,d){var v=g((l+g(n-8,6)+100100)*1461,4)+g(153*f(n+9,12)+2,5)+d-34840408;return v=v-g(g(l+100100+g(n-8,6),100)*3,4)+752,v}function $(l){var n,d,v,u,o;return n=4*l+139361631,n=n+g(g(4*l+183187720,146097)*3,4)*4-3908,d=g(f(n,1461),4)*5+308,v=g(f(d,153),5)+1,u=f(g(d,153),12)+1,o=g(n,1461)-100100+g(8-u,6),{gy:o,gm:u,gd:v}}function L(l,n,d){var v=O(l,n,d).getDay(),u=v==6?0:-(v+1),o=6+u;return{saturday:C(h(l,n,d+u)),friday:C(h(l,n,d+o))}}function O(l,n,d,v,u,o,t){var a=j(l,n,d);return new Date(a.gy,a.gm-1,a.gd,v||0,u||0,o||0,t||0)}function g(l,n){return~~(l/n)}function f(l,n){return l-~~(l/n)*n}return U}var Ze=Ke();const et={dir:"rtl",class:"relative"},tt={key:0,class:"fixed top-70 left-1/2 transform -translate-x-1/2 bg-orange-500 text-white px-6 py-4 rounded shadow-lg z-50"},at={key:0,class:"fixed inset-0 flex items-center justify-center backdrop-blur-md bg-white/30 z-50"},lt={class:"bg-white rounded-2xl shadow-2xl max-w-4xl w-11/12 p-6 relative overflow-y-auto max-h-[85vh] flex gap-6"},st={class:"flex-1"},rt={class:"max-w-lg mx-auto mb-4"},nt={class:"grid grid-cols-7 gap-1 text-xs font-bold text-gray-600 mb-2 text-center"},ot=["onClick"],it={key:0,class:"absolute -top-3 -right-2 flex flex-col items-center"},ut={key:1,class:"absolute inset-0 flex items-center justify-end ml-1.5 text-sm font-bold text-gray-900"},ct={class:"absolute bottom-0 left-0 w-full bg-gray-200 text-[10px] font-bold text-gray-800 text-center rounded-b-sm flex items-center justify-center"},dt={key:0},gt={key:1,class:"text-blue-500 text-[10px]"},ft={key:0,class:"text-center text-sm text-gray-600 mb-2"},bt={class:"w-64 flex flex-col py-16 items-stretch"},vt={class:"flex flex-col gap-4 w-full"},yt={class:"font-bold text-lg text-center mb-2"},mt={class:"flex justify-between w-full px-2"},pt={class:"ml-10"},xt={class:"flex justify-between w-full px-2"},ht={class:"ml-6"},wt={class:"flex justify-between w-full px-2"},kt={class:"ml-6"},_t={class:"flex justify-between w-full px-2"},Dt={class:"ml-10"},$t={class:"flex justify-between w-full px-2 mt-5"},jt={class:"ml-3"},Ct=5e4,St=5e3,Tt=.3,Pt={__name:"Calender",props:{open:Boolean,basePrice:{type:Number,default:2e5}},emits:["update:open","continue"],setup(s,{emit:E}){const j=s,T=E,x=V({get:()=>j.open,set:y=>T("update:open",y)}),P=k(!0),N=["Ø´","ÛŒ","Ø¯","Ø³","Ú†","Ù¾","Ø¬"],F=V(()=>{const c=(new Date().getDay()+1)%7,D=[];for(let p=0;p<7;p++)D.push(N[(c+p)%7]);return D}),h=k([]),C=k([]),_=k(!1),$=k("daily"),L=k("---"),O=k(""),g=k(!1),f=k(j.basePrice),l=k(0),n=y=>y.toLocaleString("fa-IR"),d=V(()=>{switch($.value){case"daily":return"bg-red-600";case"weekly":return"bg-green-600";case"monthly":return"bg-purple-600";default:return"bg-gray-500"}});function v(){const y=[],c=new Date;let p=new Date(c);for(;y.length<28;){const z=(p.getDay()+1)%7,Y=Ze.toJalaali(p.getFullYear(),p.getMonth()+1,p.getDate()),q=p.toDateString()===c.toDateString();y.push({gDate:new Date(p),fullDate:p.toISOString().split("T")[0],jDate:Y.jd,jMonth:Y.jm,jYear:Y.jy,isToday:q,isSelected:!1,weekdaySatIndex:z}),p.setDate(p.getDate()+1)}const w=[];for(let z=0;z<28;z+=7)w.push(y.slice(z,z+7));C.value=w}function u(y){const c=y.weekdaySatIndex;return c===5||c===6}function o(y){const c=new Date,D=new Date;D.setDate(c.getDate()+1);const p=new Date;p.setDate(c.getDate()+2);const w=new Date(y.gDate);return w.toDateString()===c.toDateString()?"today":w.toDateString()===D.toDateString()?"tomorrow":w.toDateString()===p.toDateString()?"afterTomorrow":"other"}function t(y){const c=y.fullDate,D=o(y);if(D==="afterTomorrow"){const p=h.value.indexOf(c);p===-1?(h.value=h.value.filter(w=>{const z=C.value.flat().find(q=>q.fullDate===w);return o(z)!=="afterTomorrow"}),h.value.push(c),_.value=!0):(h.value.splice(p,1),_.value=!1)}else{if(D==="today"&&_.value)return;{const p=h.value.indexOf(c);p===-1?h.value.push(c):h.value.splice(p,1)}}C.value.forEach(p=>p.forEach(w=>w.isSelected=h.value.includes(w.fullDate))),a()}function a(){if(f.value=j.basePrice,l.value=0,O.value="",g.value=!1,h.value.length===0){$.value="daily",L.value="Ù‡ÛŒÚ† Ø±ÙˆØ²ÛŒ Ø§Ù†ØªØ®Ø§Ø¨ Ù†Ø´Ø¯Ù‡";return}const y=h.value.length,c=new Set;C.value.forEach((z,Y)=>{z.filter(Z=>h.value.includes(Z.fullDate)).length>=1&&c.add(Y)}),y>=8&&c.size===C.value.length?($.value="monthly",L.value="Ø®Ø±ÛŒØ¯ Ù…Ø§Ù‡Ø§Ù†Ù‡",O.value="Û´Û°Ùª",g.value=!0):y>=3?($.value="weekly",L.value="Ø®Ø±ÛŒØ¯ Ù‡ÙØªÚ¯ÛŒ",O.value="Û²Û°Ùª",g.value=!0):($.value="daily",L.value="Ø®Ø±ÛŒØ¯ Ø±ÙˆØ²Ø§Ù†Ù‡",O.value="Ø¨Ø¯ÙˆÙ† ØªØ®ÙÛŒÙ",g.value=!1);let D=0;$.value==="weekly"&&(D=.2),$.value==="monthly"&&(D=.4);let p=j.basePrice*(1-D);g.value&&(p*=1-Tt),f.value=Math.round(p);const w=$.value==="daily"?Ct:St;l.value=f.value*y+w}function b(y){const c=o(y);if(u(y))return"bg-gray-200 text-gray-400 border border-gray-300";if(_.value&&c==="today")return"bg-gray-200 text-gray-400 border border-gray-300 cursor-not-allowed";if(y.isSelected)switch($.value){case"daily":return"bg-red-500 text-white border-2 border-red-700";case"weekly":return"bg-green-500 text-white border-2 border-green-700";case"monthly":return"bg-purple-500 text-white border-2 border-purple-700";default:return"bg-blue-200 text-black border-2 border-blue-400"}return y.isToday?"border-2 border-blue-500 bg-blue-50 text-gray-800":"bg-white text-gray-800 cursor-pointer border border-gray-300 hover:bg-blue-100"}const B=()=>P.value=window.scrollY<50;ae(()=>{v(),window.addEventListener("scroll",B)}),le(()=>{window.removeEventListener("scroll",B)});const W=k(!1);function M(){W.value=!0,setTimeout(()=>W.value=!1,3e3),x.value=!1}return(y,c)=>(r(),i("div",et,[e("button",{onClick:c[0]||(c[0]=D=>x.value=!0),class:I(["fixed top-3/5 transform -translate-y-1/2 transition-all duration-700 z-50 cursor-pointer shadow-lg flex items-center justify-center font-bold text-white left-0",P.value?"px-6 py-3 rounded-r-xl text-base bg-[#4e3356]":"px-4 py-2 rounded-r-xl text-sm opacity-70 bg-[#4e3356] hover:px-6 hover:py-3 hover:text-base hover:opacity-100"])},[e("span",null,m(P.value?"Ø§Ù†ØªØ®Ø§Ø¨ Ø±ÙˆØ² Ø¯Ø± ØªÙ‚ÙˆÛŒÙ…":"ØªÙ‚ÙˆÛŒÙ… Ù…Ù†"),1)],2),se(re,{name:"fade"},{default:Q(()=>[W.value?(r(),i("div",tt," Ø®Ø±ÛŒØ¯ Ø´Ù…Ø§ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø¯Ø± ØªÙ‚ÙˆÛŒÙ… Ø±Ø²Ø±Ùˆ Ø´Ø¯ ")):S("",!0)]),_:1}),x.value?(r(),i("div",at,[e("div",lt,[e("button",{onClick:M,class:"absolute top-2 right-3 text-gray-600 hover:text-black text-xl cursor-pointer","aria-label":"Return"},c[2]||(c[2]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 inline",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round","aria-hidden":"true"},[e("circle",{cx:"12",cy:"12",r:"10"}),e("path",{d:"M12 8l4 4-4 4m4-4H8"})],-1)])),e("div",st,[c[4]||(c[4]=e("h2",{class:"text-2xl font-bold mb-4 text-black text-center"},"Ø§Ù†ØªØ®Ø§Ø¨ Ø±ÙˆØ² Ø§ÛŒÙ† Ù…Ø­ØµÙˆÙ„ Ø¯Ø± ØªÙ‚ÙˆÛŒÙ… Ú©Ø§Ø±ÛŒ",-1)),e("div",rt,[e("div",nt,[(r(!0),i(J,null,A(F.value,D=>(r(),i("div",{key:D},m(D),1))),128))]),(r(!0),i(J,null,A(C.value,(D,p)=>(r(),i("div",{key:p,class:"grid grid-cols-7 gap-2 mb-9"},[(r(!0),i(J,null,A(D,w=>(r(),i("div",{key:w.fullDate,onClick:()=>!u(w)&&t(w),class:I([b(w),"w-14 h-14 rounded-sm relative transition-colors select-none cursor-pointer group"])},[u(w)?S("",!0):(r(),i("div",it,c[3]||(c[3]=[e("div",{class:"text-[12px]"},"0",-1),e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"w-6 h-6 text-black drop-shadow-sm"},[e("path",{"fill-rule":"evenodd",d:"M2.25 2.25a.75.75 0 000 1.5h1.636l1.808 8.138a2.25 2.25 0 002.202 1.762h9.743a2.25 2.25 0 002.15-1.61l1.605-5.743A.75.75 0 0021 5.25H6.832l-.3-1.35A2.25 2.25 0 004.5 2.25H2.25zm16.5 18a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zm-9 0a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0z","clip-rule":"evenodd"})],-1)]))),u(w)?S("",!0):(r(),i("div",ut," 0 ")),e("div",ct,[w.isToday?(r(),i("span",gt,"Ø§Ù…Ø±ÙˆØ²")):(r(),i("span",dt,m(w.jDate),1))])],10,ot))),128))]))),128))]),h.value.length>0?(r(),i("div",ft," Ø±ÙˆØ²Ù‡Ø§ÛŒ Ø§Ù†ØªØ®Ø§Ø¨ Ø´Ø¯Ù‡: "+m(h.value.length)+" Ø±ÙˆØ² ",1)):S("",!0)]),e("div",bt,[e("div",{class:I(["h-[350px] rounded-xl p-4 text-white flex flex-col items-center justify-center text-center transition-all duration-500",d.value])},[e("div",vt,[e("div",yt,m(L.value),1),e("div",mt,[c[5]||(c[5]=e("div",{class:"font-medium text-center mr-4"},"ØªØ®ÙÛŒÙ:",-1)),e("div",pt,m($.value==="daily"?"Û°Ùª":O.value),1)]),e("div",xt,[c[6]||(c[6]=e("div",{class:"font-medium text-cener mr-4"},"Ù‚ÛŒÙ…Øª:",-1)),e("div",ht,m(n(j.basePrice))+" ØªÙˆÙ…Ø§Ù†",1)]),e("div",wt,[c[7]||(c[7]=e("div",{class:"font-medium text-center mr-4"},"Ø¬Ù…Ø¹:",-1)),e("div",kt,m(n(l.value))+" ØªÙˆÙ…Ø§Ù†",1)]),e("div",_t,[c[8]||(c[8]=e("div",{class:"font-medium text-center mr-4"},"Ø³ÙˆØ¨Ø³ÛŒØ¯ Ø´Ø±Ú©Øª:",-1)),e("div",Dt,m(g.value?"x%":"Û°Ùª"),1)]),e("div",$t,[c[9]||(c[9]=e("div",{class:"font-medium text-right"},"Ù‚Ø§Ø¨Ù„ Ù¾Ø±Ø¯Ø§Ø®Øª:",-1)),e("div",jt,m(n(l.value))+" ØªÙˆÙ…Ø§Ù†",1)])])],2),e("button",{class:"mt-5 h-12 bg-gray-200 text-black rounded-lg font-bold hover:bg-orange-300 transition-colors cursor-pointer",onClick:c[1]||(c[1]=D=>y.$emit("continue"))}," Ø§Ø¯Ø§Ù…Ù‡ Ø®Ø±ÛŒØ¯ ")])])])):S("",!0)]))}},Mt=K(Pt,[["__scopeId","data-v-4dddb241"]]),Lt={class:"container mx-auto px-6 mb-8"},Ot=["onClick"],Jt=["src","alt"],At={key:0,class:"text-center py-8"},It={key:1,class:"container mx-auto px-6"},Ft={key:0,class:"text-center py-12"},Bt={key:1,class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-8 mb-8"},Wt={key:2,class:"mt-10 flex justify-center items-center gap-2 flex-wrap mb-8"},zt={key:2,class:"px-2 text-gray-500"},Et=["onClick"],Nt={key:3,class:"px-2 text-gray-500"},Vt={__name:"Index",props:{meals:Object,pagination:Object,filters:Object},setup(s){const E=k(!1),j=k(0),T=k(!1),x=k("Ù‡Ù…Ù‡"),P=k(!1),N=k(0),F=k(0),C=ne().props.auth?.user||null,_=s,$=[{title:"Ù‡Ù…Ù‡",type:"category"},{title:"Ù„Ø§ÛŒÙ† ØºØ°Ø§ÛŒ Ø§Ù‚ØªØµØ§Ø¯ÛŒ",image:"/images/food-categories/eco.png",type:"category"},{title:"Ù¾Ú© Ù…ÛŒØ§Ù†ÙˆØ¹Ø¯Ù‡",image:"/images/food-types/package.png",type:"category"},{title:"Ø³Ø§Ù„Ø§Ø¯",image:"/images/food-types/salad.png",type:"category"},{title:"Ø³Ø§Ù†Ø¯ÙˆÛŒÚ†",image:"/images/food-types/sandwich.png",type:"category"},{title:"Ú©ÛŒÚ© Ùˆ Ù†Ø§Ù†",image:"/images/food-types/cake.png",type:"category"},{title:"Ø¯Ù…Ù†ÙˆØ´ Ùˆ Ù‚Ù‡ÙˆÙ‡",image:"/images/food-types/coffee.png",type:"category"},{title:"Ù†ÙˆØ´ÛŒØ¯Ù†ÛŒ",image:"/images/food-types/drinks.png",type:"category"},{title:"Ø§ÙˆØªÙ…ÛŒÙ„",image:"/images/food-types/ot-meal.png",type:"category"},{title:"ØµØ¨Ø­Ø§Ù†Ù‡",image:"/images/food-types/breakfast.png",type:"category"},{title:"Ø¯Ø³Ø±â€ŒÙ‡Ø§",image:"/images/food-types/dessert.png",type:"category"}],L=V(()=>{if(!_.pagination)return[];const t=_.pagination.last_page,a=_.pagination.current_page;let b=Math.max(a-1,1),B=Math.min(a+1,t);a<=3&&(B=Math.min(5,t)),a>=t-2&&(b=Math.max(t-4,1));const W=[];for(let M=b;M<=B;M++)W.push(M);return W}),O=t=>{T.value=!0,x.value=t.title;const a=new URLSearchParams;t.type==="category"&&t.title!=="Ù‡Ù…Ù‡"&&a.append("category",t.title),R.get(`/menu?${a.toString()}`,{},{preserveState:!0,replace:!0,onFinish:()=>T.value=!1})},g=()=>{T.value=!0,x.value="Ù‡Ù…Ù‡",R.get("/menu",{},{preserveState:!0,replace:!0,onFinish:()=>T.value=!1})},f=t=>{T.value=!0;const a=new URLSearchParams;_.filters?.category&&_.filters.category!=="Ù‡Ù…Ù‡"&&a.append("category",_.filters.category),_.filters?.type&&a.append("type",_.filters.type),a.append("page",t),R.get(`/menu?${a.toString()}`,{},{preserveState:!0,replace:!0,onFinish:()=>T.value=!1})},l=t=>R.post("/cart",{meal_id:t.id,quantity:1}),n=t=>R.get(`/meals/${t.id}`);function d(t){const a=t&&typeof t=="object"&&"basePrice"in t?Number(t.basePrice):Number(t);j.value=isNaN(a)?0:a,E.value=!0}const v=t=>{P.value=!0,N.value=t.pageX-t.currentTarget.offsetLeft,F.value=t.currentTarget.scrollLeft},u=()=>P.value=!1,o=t=>{if(!P.value)return;t.preventDefault();const b=t.pageX-t.currentTarget.offsetLeft-N.value;t.currentTarget.scrollLeft=F.value-b};return(t,a)=>(r(),H(ee,null,{default:Q(()=>[a[7]||(a[7]=e("h1",{class:"text-3xl font-bold text-center text-gray-800 my-10"},"Ù…Ø­ØµÙˆÙ„Ø§Øª Ø§ÛŒÙˆØ§",-1)),e("div",Lt,[e("div",{class:"overflow-x-auto py-2 no-scrollbar",ref:"scrollContainer",onMousedown:v,onMouseup:u,onMouseleave:u,onMousemove:o},[e("div",{class:I(["flex gap-3 w-max cursor-grab",{"cursor-grabbing":P.value}])},[(r(),i(J,null,A($,b=>e("button",{key:b.title,onClick:B=>O(b),class:I(["flex items-center gap-2 flex-shrink-0 px-4 py-2 rounded-full border text-sm transition",x.value===b.title?"bg-blue-500 text-white border-blue-500":"bg-white border-gray-300 text-gray-700 hover:bg-gray-100"])},[b.image?(r(),i("img",{key:0,class:"w-5 h-5 object-contain",src:b.image,alt:b.title},null,8,Jt)):S("",!0),e("span",null,m(b.title),1)],10,Ot)),64))],2)],544)]),T.value?(r(),i("div",At,a[5]||(a[5]=[e("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"},null,-1),e("p",{class:"mt-2 text-gray-600"},"Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ...",-1)]))):(r(),i("div",It,[s.meals.data.length===0?(r(),i("div",Ft,[a[6]||(a[6]=e("p",{class:"text-gray-500 text-lg"},"Ù…Ø­ØµÙˆÙ„ÛŒ Ø¨Ø§ ÙÛŒÙ„ØªØ± Ø§Ù†ØªØ®Ø§Ø¨ Ø´Ø¯Ù‡ ÛŒØ§ÙØª Ù†Ø´Ø¯.",-1)),e("button",{onClick:g,class:"mt-4 px-6 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition cursor-pointer"}," Ø­Ø°Ù ÙÛŒÙ„ØªØ±Ù‡Ø§ ")])):(r(),i("div",Bt,[(r(!0),i(J,null,A(s.meals.data,b=>(r(),H(Qe,{key:b.id,meal:b,onAddToCart:l,onOpenCalendar:d,onViewDetails:n},null,8,["meal"]))),128))])),s.meals.data.length>0&&s.pagination.last_page>1?(r(),i("div",Wt,[s.pagination.current_page>1?(r(),i("button",{key:0,onClick:a[0]||(a[0]=b=>f(s.pagination.current_page-1)),class:"px-4 py-2 rounded-lg border border-gray-300 bg-white hover:bg-gray-100 transition cursor-pointer"}," Ù‚Ø¨Ù„ÛŒ ")):S("",!0),s.pagination.current_page>3&&!L.value.includes(1)?(r(),i("button",{key:1,onClick:a[1]||(a[1]=b=>f(1)),class:I(["px-3 py-1 rounded-lg border border-gray-300 cursor-pointer",s.pagination.current_page===1?"bg-blue-500 text-white border-blue-500":"bg-white hover:bg-gray-100"])}," 1 ",2)):S("",!0),s.pagination.current_page>4?(r(),i("span",zt,"...")):S("",!0),(r(!0),i(J,null,A(L.value,b=>(r(),i("button",{key:b,onClick:B=>f(b),class:I(["px-3 py-1 rounded-lg border border-gray-300 cursor-pointer",b===s.pagination.current_page?"bg-blue-500 text-white border-blue-500":"bg-white hover:bg-gray-100"])},m(b),11,Et))),128)),s.pagination.current_page<s.pagination.last_page-3?(r(),i("span",Nt,"...")):S("",!0),s.pagination.current_page<s.pagination.last_page-2&&!L.value.includes(s.pagination.last_page)?(r(),i("button",{key:4,onClick:a[2]||(a[2]=b=>f(s.pagination.last_page)),class:I(["px-3 py-1 rounded-lg border border-gray-300 cursor-pointer",s.pagination.last_page===s.pagination.current_page?"bg-blue-500 text-white border-blue-500":"bg-white hover:bg-gray-100"])},m(s.pagination.last_page),3)):S("",!0),s.pagination.current_page<s.pagination.last_page?(r(),i("button",{key:5,onClick:a[3]||(a[3]=b=>f(s.pagination.current_page+1)),class:"px-4 py-2 rounded-lg border border-gray-300 bg-white hover:bg-gray-100 transition cursor-pointer"}," Ø¨Ø¹Ø¯ÛŒ ")):S("",!0)])):S("",!0)])),G(C)?(r(),H(oe,{key:2})):S("",!0),G(C)?(r(),H(Mt,{key:3,open:E.value,"onUpdate:open":a[4]||(a[4]=b=>E.value=b),basePrice:j.value},null,8,["open","basePrice"])):S("",!0)]),_:1,__:[7]}))}},Gt=K(Vt,[["__scopeId","data-v-3751e427"]]);export{Gt as default};

import{r as c,a as V,o as a,w as U,b as e,d as n,e as r,f as b,v as d,g as B,F as h,h as x,t as i,m as D,i as m}from"./app-Bx3kQc72.js";import{_ as $}from"./AdminAppLayout-C7GeDG2w.js";const M={class:"bg-gray-800 p-4 rounded mb-6 flex items-center space-x-2"},A={class:"grid grid-cols-2 gap-4"},F=["value"],L={class:"bg-gray-800 p-4 rounded"},N={class:"w-full text-right"},E={class:"p-2"},I={class:"p-2"},R={class:"p-2"},T={class:"p-2"},j={class:"p-2"},q={class:"p-2 flex space-x-2"},z=["onClick"],G=["onClick"],H={key:0},O={__name:"Clients",props:{clients:Array,companies:Array},setup(y){const g=y,u=c([...g.clients]),f=c([...g.companies]),l=c({name:"",email:"",phone:"",belongs_to:"",personal_code:"",position:""}),p=c({search:""});function _(){m.post("/admin/users/clients",l.value,{onSuccess:o=>{u.value=o.props.clients,l.value={name:"",email:"",phone:"",belongs_to:"",personal_code:"",position:""}}})}function w(o){alert("جزئیات مشتری: "+o.name)}function k(o){confirm("آیا از حذف این مشتری مطمئن هستید؟")&&m.delete(`/admin/users/clients/${o}`,{onSuccess:t=>{u.value=t.props.clients}})}function v(){m.get("/admin/users/clients",{search:p.value.search},{preserveState:!0,replace:!0,onSuccess:o=>{u.value=o.props.clients}})}function C(){p.value.search="",v()}return(o,t)=>(a(),V($,null,{default:U(()=>[e("div",null,[t[11]||(t[11]=e("h2",{class:"text-xl font-bold mb-6 text-yellow-600"},"مدیریت مشتریان",-1)),e("div",M,[n(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>p.value.search=s),type:"text",placeholder:"جستجو بر اساس نام، ایمیل یا تلفن...",class:"flex-1 p-2 bg-gray-700 rounded text-white"},null,512),[[d,p.value.search]]),e("button",{onClick:v,class:"bg-yellow-500 text-gray-900 px-4 py-2 rounded font-bold"}," جستجو "),p.value.search?(a(),r("button",{key:0,onClick:C,class:"bg-gray-600 text-white px-4 py-2 rounded font-bold"}," پاک کردن ")):b("",!0)]),e("form",{onSubmit:B(_,["prevent"]),class:"bg-gray-800 p-4 rounded mb-6"},[e("div",A,[n(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>l.value.name=s),placeholder:"نام",class:"p-2 bg-gray-700 rounded text-white"},null,512),[[d,l.value.name]]),n(e("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>l.value.email=s),placeholder:"ایمیل",class:"p-2 bg-gray-700 rounded text-white"},null,512),[[d,l.value.email]]),n(e("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>l.value.phone=s),placeholder:"تلفن",class:"p-2 bg-gray-700 rounded text-white"},null,512),[[d,l.value.phone]]),n(e("input",{"onUpdate:modelValue":t[4]||(t[4]=s=>l.value.personal_code=s),placeholder:"کد پرسنلی",class:"p-2 bg-gray-700 rounded text-white"},null,512),[[d,l.value.personal_code]]),n(e("input",{"onUpdate:modelValue":t[5]||(t[5]=s=>l.value.position=s),placeholder:"پوزیشن سازمان",class:"p-2 bg-gray-700 rounded text-white"},null,512),[[d,l.value.position]]),n(e("select",{"onUpdate:modelValue":t[6]||(t[6]=s=>l.value.belongs_to=s),class:"p-2 bg-gray-700 rounded text-white"},[t[7]||(t[7]=e("option",{value:""},"انتخاب شرکت",-1)),(a(!0),r(h,null,x(f.value,s=>(a(),r("option",{key:s.id,value:s.id},i(s.name),9,F))),128))],512),[[D,l.value.belongs_to]])]),t[8]||(t[8]=e("button",{class:"mt-4 bg-yellow-500 text-gray-900 px-4 py-2 rounded font-bold"},"افزودن مشتری",-1))],32),e("div",L,[e("table",N,[t[10]||(t[10]=e("thead",null,[e("tr",{class:"border-b text-white border-gray-700"},[e("th",{class:"p-2"},"نام"),e("th",{class:"p-2"},"ایمیل"),e("th",{class:"p-2"},"تلفن"),e("th",{class:"p-2"},"شرکت"),e("th",{class:"p-2"},"تاریخ ثبت"),e("th",{class:"p-2"},"عملیات")])],-1)),e("tbody",null,[(a(!0),r(h,null,x(u.value,s=>(a(),r("tr",{key:s.id,class:"border-b border-gray-700 text-white"},[e("td",E,i(s.name),1),e("td",I,i(s.email),1),e("td",R,i(s.phone||"---"),1),e("td",T,i(s.parent_business?.name||"---"),1),e("td",j,i(new Date(s.created_at).toLocaleDateString("fa-IR")),1),e("td",q,[e("button",{onClick:S=>w(s),class:"text-blue-400 hover:text-blue-600"},"👁️",8,z),e("button",{onClick:S=>k(s.id),class:"text-red-400 hover:text-red-600"},"🗑️",8,G)])]))),128)),u.value.length===0?(a(),r("tr",H,t[9]||(t[9]=[e("td",{colspan:"6",class:"text-center text-gray-400 p-4"},"مشتری‌ای یافت نشد",-1)]))):b("",!0)])])])])]),_:1}))}};export{O as default};

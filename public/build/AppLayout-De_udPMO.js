import{_ as j,F as z}from"./Footer-B1N_yjfk.js";import{c as B,r as m,k as M,e as r,f as d,o as a,b as t,p as f,d as p,v as c,n as i,t as u,m as D,G,l as T,g as h,i as E,s as F,j as R}from"./app-Bx3kQc72.js";const Z={key:0,class:"fixed inset-0 flex justify-center items-center bg-black/50 backdrop-blur-lg z-50 p-4"},q={key:0,class:"bg-white/10 backdrop-blur-xl rounded-3xl shadow-2xl border border-white/20 w-full max-w-[500px] md:max-w-[600px] lg:max-w-[700px] max-h-[90vh] overflow-y-auto p-6 no-scrollbar"},H={class:"text-xs mt-1"},I={key:0,class:"text-red-400"},J={key:1,class:"text-red-400"},K={key:0,class:"text-red-400 text-xs mt-1"},O={class:"text-xs mt-1"},Q={key:0,class:"text-red-400"},W={key:1,class:"text-red-400"},X={key:0,class:"text-red-400 text-xs mt-1"},Y={class:"text-xs mt-1"},ee={class:"text-gray-400 mr-4 space-y-1"},te={key:0,class:"text-red-400 mt-1"},se={key:1,class:"text-red-400 mt-1"},oe={key:0,class:"text-red-400 text-xs mt-1"},le={class:"flex items-center"},re={key:0,class:"text-red-400 text-xs mt-1"},ae={key:1,class:"bg-red-500/20 border border-red-500 text-red-300 p-3 rounded-xl text-sm text-center"},ne=["disabled"],de={key:0},ie={key:1},ue={class:"text-center text-sm mt-2 text-gray-400"},pe={key:1,class:"bg-white/10 backdrop-blur-xl rounded-3xl shadow-2xl border border-white/20 w-full max-w-[400px] md:max-w-[500px] lg:max-w-[600px] max-h-[80vh] overflow-y-auto p-6 no-scrollbar"},xe={key:0,class:"text-red-400 text-xs mt-1"},me={key:0,class:"text-red-400 text-xs mt-1"},ce=["disabled"],be={key:0},ge={key:1},ve={class:"flex justify-between text-sm mt-3 text-gray-400"},ye={__name:"GlobalAuthModal",setup(L){const k=B(()=>{const o=window.location.pathname;return!["/login","/register","/forgot-password"].includes(o)}),w=m(!1),b=m(!1),g=m(!1),v=m(""),_=m(""),l=m({}),x=m({}),s=M({name:"",personal_code:"",phone:"",position:"",email:"",password:"",password_confirmation:"",terms:!1}),y=M({phone:"",password:"",remember:!1}),V=o=>/^[\u0600-\u06FF\s]+$/.test(o)&&o.trim().length>0,$=o=>/^09\d{9}$/.test(o),S=o=>/[A-Za-z]/.test(o),U=o=>/\d/.test(o),N=o=>/[!@#$%^&*]/.test(o),C=o=>o.length>=8&&S(o)&&U(o)&&N(o),P=async()=>{if(s.name&&!V(s.name)){l.value={name:["لطفاً نام را به صورت صحیح و فقط با حروف فارسی وارد کنید"]};return}if(s.phone&&!$(s.phone)){l.value={phone:["لطفاً یک شماره تلفن معتبر وارد کنید"]};return}b.value=!0,v.value="",l.value={};try{await E.post("/register",s,{onSuccess:()=>console.log("Registration successful"),onError:o=>{o.errors&&(l.value=o.errors),v.value=o.message||"خطا در ثبت‌نام. لطفا مجددا تلاش کنید."},onFinish:()=>b.value=!1})}catch{v.value="خطا در ارتباط با سرور",b.value=!1}},A=async()=>{g.value=!0,_.value="",x.value={};try{await E.post("/login",y,{onSuccess:()=>console.log("Login successful"),onError:o=>{o.errors&&(x.value=o.errors),_.value=o.message||"خطا در ورود. لطفا مجددا تلاش کنید."},onFinish:()=>g.value=!1})}catch{_.value="خطا در ارتباط با سرور",g.value=!1}};return(o,e)=>!o.$page.props.auth.user&&k.value?(a(),r("div",Z,[w.value?(a(),r("div",pe,[e[27]||(e[27]=t("h1",{class:"text-2xl md:text-3xl text-center text-lime-300 font-semibold mb-6"}," ورود به حساب ایوا ",-1)),t("form",{onSubmit:h(A,["prevent"]),class:"space-y-4"},[t("div",null,[e[24]||(e[24]=t("label",{class:"text-gray-300 text-sm mb-1 block"},"شماره همراه یا کد پرسنلی",-1)),p(t("input",{type:"text","onUpdate:modelValue":e[8]||(e[8]=n=>y.phone=n),placeholder:"09xxxxxxxxx یا کد پرسنلی",class:i(["w-full px-4 py-2 bg-gray-800 text-white rounded-xl border border-gray-700 focus:ring-2 focus:ring-lime-400 outline-none",{"border-red-500":x.value.phone}])},null,2),[[c,y.phone]]),x.value.phone?(a(),r("p",xe,u(x.value.phone[0]),1)):d("",!0)]),t("div",null,[e[25]||(e[25]=t("label",{class:"text-gray-300 text-sm mb-1 block"},"رمز عبور",-1)),p(t("input",{type:"password","onUpdate:modelValue":e[9]||(e[9]=n=>y.password=n),placeholder:"رمز خود را وارد کنید",class:i(["w-full px-4 py-2 bg-gray-800 text-white rounded-xl border border-gray-700 focus:ring-2 focus:ring-lime-400 outline-none",{"border-red-500":x.value.password}])},null,2),[[c,y.password]]),x.value.password?(a(),r("p",me,u(x.value.password[0]),1)):d("",!0)]),t("button",{type:"submit",disabled:g.value,class:"w-full py-3 rounded-xl bg-lime-400 text-gray-900 font-semibold hover:bg-lime-300 transition disabled:opacity-50 disabled:cursor-not-allowed"},[g.value?(a(),r("span",be,"در حال ورود...")):(a(),r("span",ge,"ورود"))],8,ce),t("div",ve,[e[26]||(e[26]=t("a",{href:"/forgot-password",class:"hover:text-lime-400 transition"},"رمز عبور را فراموش کرده‌اید؟",-1)),t("a",{href:"#",onClick:e[10]||(e[10]=h(n=>w.value=!1,["prevent"])),class:"hover:text-lime-400 transition"},"ثبت‌نام کنید")])],32)])):(a(),r("div",q,[e[23]||(e[23]=t("h1",{class:"text-2xl md:text-3xl text-center text-lime-300 font-semibold mb-6"},[f(" فرم ثبت‌نام پرسنل انتخاب"),t("br"),f("در ایوا ")],-1)),t("form",{onSubmit:h(P,["prevent"]),class:"space-y-4"},[t("div",null,[e[12]||(e[12]=t("label",{class:"text-gray-300 text-sm mb-1 block"},"نام کامل",-1)),p(t("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=n=>s.name=n),placeholder:"مثلاً علی رضایی",pattern:"^[\\u0600-\\u06FF\\s]+$",class:i(["w-full px-4 py-2 bg-gray-800 text-white rounded-xl border border-gray-700 focus:ring-2 focus:ring-lime-400 outline-none",{"border-red-500":l.value.name||s.name&&!V(s.name)}])},null,2),[[c,s.name]]),t("div",H,[e[11]||(e[11]=t("p",{class:"text-gray-400"},"فقط حروف فارسی مجاز است",-1)),s.name&&!V(s.name)?(a(),r("p",I," لطفاً فقط از حروف فارسی استفاده کنید (بدون اعداد و حروف انگلیسی) ")):d("",!0),l.value.name?(a(),r("p",J,u(l.value.name[0]),1)):d("",!0)])]),t("div",null,[e[13]||(e[13]=t("label",{class:"text-gray-300 text-sm mb-1 block"},"کد پرسنلی",-1)),p(t("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=n=>s.personal_code=n),placeholder:"کد خود را وارد کنید",class:i(["w-full px-4 py-2 bg-gray-800 text-white rounded-xl border border-gray-700 focus:ring-2 focus:ring-lime-400 outline-none",{"border-red-500":l.value.personal_code}])},null,2),[[c,s.personal_code]]),l.value.personal_code?(a(),r("p",K,u(l.value.personal_code[0]),1)):d("",!0)]),t("div",null,[e[15]||(e[15]=t("label",{class:"text-gray-300 text-sm mb-1 block"},"شماره تماس",-1)),p(t("input",{type:"tel","onUpdate:modelValue":e[2]||(e[2]=n=>s.phone=n),placeholder:"09123456789",pattern:"09[0-9]{9}",maxlength:"11",class:i(["w-full px-4 py-2 bg-gray-800 text-white rounded-xl border border-gray-700 focus:ring-2 focus:ring-lime-400 outline-none",{"border-red-500":l.value.phone||s.phone&&!$(s.phone)}])},null,2),[[c,s.phone]]),t("div",O,[e[14]||(e[14]=t("p",{class:"text-gray-400"},"شماره تلفن باید ۱۱ رقم و با ۰۹ شروع شود",-1)),s.phone&&!$(s.phone)?(a(),r("p",Q," لطفاً یک شماره معتبر وارد کنید (مثال: 09123456789) ")):d("",!0),l.value.phone?(a(),r("p",W,u(l.value.phone[0]),1)):d("",!0)])]),t("div",null,[e[17]||(e[17]=t("label",{class:"text-gray-300 text-sm mb-1 block"},"پوزیشن سازمان",-1)),p(t("select",{"onUpdate:modelValue":e[3]||(e[3]=n=>s.position=n),class:i(["w-full px-4 py-2 bg-gray-800 text-white rounded-xl border border-gray-700 focus:ring-2 focus:ring-lime-400 outline-none",{"border-red-500":l.value.position}])},e[16]||(e[16]=[G('<option value="" disabled selected>پوزیشن خود را انتخاب کنید</option><option value="manager">مدیر</option><option value="supervisor">سرپرست</option><option value="employee">کارمند</option><option value="operator">اپراتور</option>',5)]),2),[[D,s.position]]),l.value.position?(a(),r("p",X,u(l.value.position[0]),1)):d("",!0)]),t("div",null,[e[19]||(e[19]=t("label",{class:"text-gray-300 text-sm mb-1 block"},"رمز عبور",-1)),p(t("input",{type:"password","onUpdate:modelValue":e[4]||(e[4]=n=>s.password=n),placeholder:"رمز عبور خود را وارد کنید",class:i(["w-full px-4 py-2 bg-gray-800 text-white rounded-xl border border-gray-700 focus:ring-2 focus:ring-lime-400 outline-none",{"border-red-500":l.value.password||s.password&&!C(s.password)}])},null,2),[[c,s.password]]),t("div",Y,[e[18]||(e[18]=t("p",{class:"text-gray-400"},"رمز عبور باید شامل موارد زیر باشد:",-1)),t("ul",ee,[t("li",{class:i({"text-lime-400":s.password&&S(s.password)})},"• حداقل یک حرف انگلیسی",2),t("li",{class:i({"text-lime-400":s.password&&U(s.password)})},"• حداقل یک عدد",2),t("li",{class:i({"text-lime-400":s.password&&N(s.password)})},"• حداقل یک کاراکتر خاص (!@#$%^&*)",2),t("li",{class:i({"text-lime-400":s.password&&s.password.length>=8})},"• حداقل ۸ کاراکتر",2)]),s.password&&!C(s.password)?(a(),r("p",te,"لطفاً یک رمز عبور معتبر وارد کنید")):d("",!0),l.value.password?(a(),r("p",se,u(l.value.password[0]),1)):d("",!0)])]),t("div",null,[e[20]||(e[20]=t("label",{class:"text-gray-300 text-sm mb-1 block"},"تکرار رمز عبور",-1)),p(t("input",{type:"password","onUpdate:modelValue":e[5]||(e[5]=n=>s.password_confirmation=n),placeholder:"رمز عبور خود را مجدداً وارد کنید",class:i(["w-full px-4 py-2 bg-gray-800 text-white rounded-xl border border-gray-700 focus:ring-2 focus:ring-lime-400 outline-none",{"border-red-500":l.value.password_confirmation}])},null,2),[[c,s.password_confirmation]]),l.value.password_confirmation?(a(),r("p",oe,u(l.value.password_confirmation[0]),1)):d("",!0)]),t("div",le,[p(t("input",{id:"terms","onUpdate:modelValue":e[6]||(e[6]=n=>s.terms=n),type:"checkbox",class:i(["h-4 w-4 text-lime-600 focus:ring-lime-500 border-gray-300 rounded",{"border-red-500":l.value.terms}])},null,2),[[T,s.terms]]),e[21]||(e[21]=t("label",{for:"terms",class:"mr-2 block text-sm text-gray-300"},[f(" با "),t("a",{href:"#",class:"text-lime-400 hover:text-lime-300"},"قوانین و مقررات"),f(" موافقم ")],-1))]),l.value.terms?(a(),r("p",re,u(l.value.terms[0]),1)):d("",!0),v.value?(a(),r("div",ae,u(v.value),1)):d("",!0),t("button",{type:"submit",disabled:b.value,class:"w-full py-3 rounded-xl bg-lime-400 text-gray-900 font-semibold hover:bg-lime-300 transition disabled:opacity-50 disabled:cursor-not-allowed"},[b.value?(a(),r("span",de,"در حال ثبت‌نام...")):(a(),r("span",ie,"ثبت‌نام"))],8,ne),t("div",ue,[e[22]||(e[22]=f(" قبلاً حساب دارید؟ ",-1)),t("a",{href:"#",onClick:e[7]||(e[7]=h(n=>w.value=!0,["prevent"])),class:"hover:text-lime-400 transition"},"ورود")])],32)]))])):d("",!0)}},fe={class:"min-h-screen flex flex-col bg-gray-50 text-gray-900"},we={class:"flex-1"},_e={__name:"AppLayout",setup(L){return(k,w)=>(a(),r("div",fe,[F(j),t("main",we,[R(k.$slots,"default")]),F(z),F(ye)]))}};export{_e as _};

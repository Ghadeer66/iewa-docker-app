import{r as k,k as C,a as V,o as l,w as S,b as e,d as n,e as o,f as b,v as i,g as U,F as g,h,t as r,m as B,i as c}from"./app-Bx3kQc72.js";import{_ as D}from"./AdminAppLayout-C7GeDG2w.js";const M={class:"bg-gray-800 p-4 rounded mb-6 flex items-center space-x-2"},$={class:"grid grid-cols-2 gap-4"},j=["value"],F={class:"bg-gray-800 p-4 rounded"},L={class:"w-full text-right"},N={class:"p-2"},O={class:"p-2"},A={class:"p-2"},E={class:"p-2"},I={class:"p-2"},R={class:"p-2 flex space-x-2"},T=["onClick"],q=["onClick"],z={key:0},J={__name:"Companies",props:{companies:Object,admins:Array,filters:Object},setup(u){const x=u,a=k({business_name:"",name:"",email:"",phone:"",admin_id:""}),d=C({search:x.filters?.search??""});function v(){c.post("/admin/companies",a.value,{onSuccess:()=>a.value={business_name:"",name:"",email:"",phone:"",admin_id:""}})}function m(){c.get("/admin/companies",{search:d.search},{preserveState:!0,replace:!0})}function f(){d.search="",m()}function y(p){alert("جزئیات شرکت: "+p.name)}function _(p){confirm("آیا از حذف این شرکت مطمئن هستید؟")&&c.delete(route("admin.companies.destroy",p))}return(p,s)=>(l(),V(D,null,{default:S(()=>[e("div",null,[s[10]||(s[10]=e("h2",{class:"text-xl font-bold mb-6 text-yellow-600"},"مدیریت شرکت‌ها",-1)),e("div",M,[n(e("input",{"onUpdate:modelValue":s[0]||(s[0]=t=>d.search=t),type:"text",placeholder:"جستجو بر اساس نام، ایمیل یا نام شرکت...",class:"flex-1 p-2 bg-gray-700 rounded text-white"},null,512),[[i,d.search]]),e("button",{onClick:m,class:"bg-yellow-500 text-gray-900 px-4 py-2 rounded font-bold"}," جستجو "),d.search?(l(),o("button",{key:0,onClick:f,class:"bg-gray-600 text-white px-4 py-2 rounded font-bold"}," پاک کردن ")):b("",!0)]),e("form",{onSubmit:U(v,["prevent"]),class:"bg-gray-800 p-4 rounded mb-6"},[e("div",$,[n(e("input",{"onUpdate:modelValue":s[1]||(s[1]=t=>a.value.business_name=t),placeholder:"نام شرکت",class:"p-2 bg-gray-700 rounded text-white"},null,512),[[i,a.value.business_name]]),n(e("input",{"onUpdate:modelValue":s[2]||(s[2]=t=>a.value.name=t),placeholder:"نام مسئول",class:"p-2 bg-gray-700 rounded text-white"},null,512),[[i,a.value.name]]),n(e("input",{"onUpdate:modelValue":s[3]||(s[3]=t=>a.value.email=t),placeholder:"ایمیل",class:"p-2 bg-gray-700 rounded text-white"},null,512),[[i,a.value.email]]),n(e("input",{"onUpdate:modelValue":s[4]||(s[4]=t=>a.value.phone=t),placeholder:"تلفن",class:"p-2 bg-gray-700 rounded text-white"},null,512),[[i,a.value.phone]]),n(e("select",{"onUpdate:modelValue":s[5]||(s[5]=t=>a.value.admin_id=t),class:"p-2 bg-gray-700 rounded text-white"},[s[6]||(s[6]=e("option",{value:"",disabled:""},"انتخاب ادمین",-1)),(l(!0),o(g,null,h(u.admins,t=>(l(),o("option",{key:t.id,value:t.id},r(t.name),9,j))),128))],512),[[B,a.value.admin_id]])]),s[7]||(s[7]=e("button",{class:"mt-4 bg-yellow-500 text-gray-900 px-4 py-2 rounded font-bold"},"افزودن شرکت",-1))],32),e("div",F,[e("table",L,[s[9]||(s[9]=e("thead",null,[e("tr",{class:"border-b text-white border-gray-700"},[e("th",{class:"p-2"},"نام شرکت"),e("th",{class:"p-2"},"نام مسئول"),e("th",{class:"p-2"},"ایمیل"),e("th",{class:"p-2"},"ادمین"),e("th",{class:"p-2"},"تاریخ ثبت"),e("th",{class:"p-2"},"عملیات")])],-1)),e("tbody",null,[(l(!0),o(g,null,h(u.companies.data,t=>(l(),o("tr",{key:t.id,class:"border-b border-gray-700 text-white"},[e("td",N,r(t.business_name||"---"),1),e("td",O,r(t.name),1),e("td",A,r(t.email),1),e("td",E,r(t.admin?.name||"---"),1),e("td",I,r(new Date(t.created_at).toLocaleDateString("fa-IR")),1),e("td",R,[e("button",{onClick:w=>y(t),class:"text-blue-400 hover:text-blue-600"},"✏️",8,T),e("button",{onClick:w=>_(t.id),class:"text-red-400 hover:text-red-600"},"🗑️",8,q)])]))),128)),u.companies.data.length===0?(l(),o("tr",z,s[8]||(s[8]=[e("td",{colspan:"6",class:"text-center text-gray-400 p-4"},"شرکتی یافت نشد",-1)]))):b("",!0)])])])])]),_:1}))}};export{J as default};

import{_ as W}from"./AppLayout-De_udPMO.js";import{r as $,c as V,e as n,o as l,b as a,f as k,t as g,n as B,F as M,h as O,g as Q,A as K,B as X,s as Y,w as H,T as Z,G as ee,H as te,a as ae,u as re,i as E}from"./app-Bx3kQc72.js";import{_ as se}from"./RulesButton-IPahnqsJ.js";import{_ as U}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./Footer-B1N_yjfk.js";const le={class:"meal-card bg-white rounded-2xl shadow-md hover:shadow-lg transition overflow-hidden border border-gray-200 flex flex-col relative"},ne={class:"relative w-full bg-gray-100"},oe=["src","alt"],ie={key:0,class:"absolute top-3 left-3 bg-green-600 text-white text-xs font-semibold px-3 py-1 rounded-full shadow"},de={class:"p-4 flex flex-col flex-grow"},ue={class:"flex justify-between items-center gap-4 bg-orange-100 p-3 rounded-xl mb-3"},ce={class:"font-bold text-gray-800 text-md"},ge={class:"font-bold text-orange-500 text-md"},be={class:"flex justify-center items-center gap-2 mb-3"},fe={class:"font-semibold text-green-600 text-base"},pe={class:"flex justify-center mb-3"},ve={class:"flex items-center justify-center gap-4 p-1 border border-gray-200 rounded-2xl w-40"},ye=["disabled"],me={class:"text-lg font-semibold"},xe={class:"flex-1 overflow-y-auto p-6 space-y-4"},he={class:"flex justify-between items-center border-b border-gray-200 pb-2 mb-4"},we={class:"text-xl font-semibold text-gray-800"},ke=["src","alt"],_e={class:"bg-gray-50 p-4 rounded-lg border border-gray-200"},De={class:"space-y-1 text-gray-600 text-sm"},$e={class:"flex items-center justify-center gap-4 p-3 border border-gray-200 rounded-lg"},je=["disabled"],Ce={class:"text-lg font-semibold"},Se=["disabled"],Pe={class:"bg-gray-50 p-4 rounded-lg border border-gray-200"},Te={class:"list-disc list-inside text-gray-600 text-sm"},Me={class:"bg-gray-50 p-4 rounded-lg border border-gray-200"},Je={class:"list-disc list-inside text-gray-600 text-sm"},Oe={class:"bg-gray-50 p-4 rounded-lg border border-gray-200"},Le={class:"list-disc list-inside text-gray-600 text-sm"},Ae={class:"bg-gray-50 p-4 rounded-lg border border-gray-200"},Fe={class:"list-disc list-inside text-gray-600 text-sm"},Be={class:"w-80 border-l border-gray-200 bg-gray-50 p-4 flex flex-col"},Ie={class:"flex-1 space-y-3 overflow-y-auto"},Ne={class:"flex-shrink-0"},ze={class:"w-10 h-10 rounded-full bg-lime-400 flex items-center justify-center text-white text-lg font-bold"},Ee={class:"flex flex-col"},Ve={class:"font-semibold text-gray-800"},Ye={class:"text-gray-600 text-sm"},Re={__name:"MealCard",props:{meal:Object,isAuthenticated:{type:Boolean,default:!1}},emits:["open-calendar"],setup(s,{emit:A}){const S=s,j=$(!1),p=$(1),L={روزانه:0,هفتگی:.2,ماهانه:.4},I=V(()=>{const v=S.meal.price||0;return Math.round(v*(1-L.روزانه)*p.value)}),x=V(()=>{const v=S.meal.price||0;return Object.entries(L).map(([t,e])=>({plan:t,discountPercent:e*100,priceAfterDiscount:Math.round(v*(1-e)*p.value)}))}),P=()=>{j.value=!0},w=()=>{j.value=!1},C=()=>{p.value++},T=()=>{p.value>1&&p.value--},_=A,J=()=>{_("open-calendar",{basePrice:I.value})},d=$([{user:"نیلوفر زمانی",text:"کیفیت فوق العاده کاملا تازه"},{user:"نیلوفر شکرانه اقدام",text:"والا خوشمزه و عالی بود آدم ازش سیر نمیشه"},{user:"شیما طوسی",text:"واقعا عالی و بینظیر بود"},{user:"آیدا طالبی",text:"سالاد ها همیشه خیلی تازه و فرش هست لطفا همین جوری بمونید"},{user:"نیلوفر حدادیان",text:"دخترم از مشتری های شماست و واقعا از خوردن غذاهای شما لذت میبره"},{user:"مرتضی پیروانی",text:"تنوع غذاها خوبه این سالاد و من از بوتیک گرفته بودم"}]);return(v,t)=>(l(),n("div",le,[a("div",ne,[a("img",{src:s.meal.image_url??(s.meal.image?`/${s.meal.image}`:"/images/placeholder.png"),alt:s.meal.title||"meal",class:"w-full h-60 object-cover rounded-t-2xl"},null,8,oe),s.meal.is_new?(l(),n("span",ie," جدید ")):k("",!0)]),a("div",de,[a("div",ue,[a("h3",ce,g(s.meal.title),1),a("h3",ge,g(s.meal.kcal),1)]),a("div",be,[t[1]||(t[1]=a("span",{class:"text-sm text-gray-500"},"قیمت:",-1)),a("span",fe,g(I.value.toLocaleString())+" تومان",1)]),a("div",pe,[a("div",ve,[a("button",{onClick:T,disabled:p.value<=1,class:B([p.value>1?"bg-gray-200 text-gray-600 hover:bg-gray-300":"bg-gray-100 text-gray-400 cursor-not-allowed","w-8 h-8 rounded-full transition flex items-center justify-center"])},"-",10,ye),a("span",me,g(p.value),1),a("button",{onClick:C,class:"w-8 h-8 rounded-full bg-gray-200 text-gray-600 hover:bg-gray-300 transition flex items-center justify-center"},"+")])]),a("div",{class:"flex justify-center gap-3"},[a("button",{onClick:P,class:"bg-yellow-100 text-yellow-700 border border-yellow-300 px-4 py-1 rounded-md text-sm hover:bg-yellow-200 transition cursor-pointer"}," جزئیات بیشتر "),a("button",{onClick:J,class:"px-4 py-2 rounded-md text-sm transition bg-green-500 text-white hover:bg-green-600"}," انتخاب روز ")])]),j.value?(l(),n("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm",onClick:w},[a("div",{onClick:t[0]||(t[0]=Q(()=>{},["stop"])),class:"bg-white rounded-xl shadow-xl w-full max-w-5xl max-h-[85vh] overflow-hidden border border-gray-200 flex"},[a("div",xe,[a("div",he,[a("button",{onClick:w,class:"text-gray-500 hover:text-gray-700 text-2xl font-bold cursor-pointer"}," × "),a("h2",we,g(s.meal.title),1)]),a("img",{src:s.meal.image_url??(s.meal.image?`/${s.meal.image}`:"/images/placeholder.png"),alt:s.meal.title||"meal",class:"w-full h-60 object-cover rounded-lg shadow-sm"},null,8,ke),a("div",_e,[t[2]||(t[2]=a("h3",{class:"font-semibold text-gray-700 mb-2"},"اطلاعات تغذیه‌ای",-1)),a("div",De,[(l(!0),n(M,null,O(s.meal.nutritional_informations,(e,r)=>(l(),n("div",{key:r,class:"flex justify-between"},[a("span",null,g(r),1),a("span",null,g(e),1)]))),128))])]),a("div",$e,[a("button",{onClick:T,disabled:p.value<=1,class:B([p.value>1?"bg-gray-200 text-gray-600 hover:bg-gray-300":"bg-gray-100 text-gray-400 cursor-not-allowed","w-8 h-8 rounded-full transition flex items-center justify-center"])},"-",10,je),a("span",Ce,g(p.value),1),a("button",{onClick:C,class:"w-8 h-8 rounded-full bg-gray-200 text-gray-600 hover:bg-gray-300 transition flex items-center justify-center"},"+")]),a("button",{onClick:J,disabled:s.isAuthenticated,class:"w-full bg-green-500 text-white py-3 rounded-md text-sm font-medium hover:bg-green-600 transition disabled:bg-gray-300 disabled:cursor-not-allowed"}," انتخاب روز ",8,Se),a("div",Pe,[t[3]||(t[3]=a("h3",{class:"font-semibold text-gray-700 mb-2"},"موارد منع مصرف",-1)),a("ul",Te,[(l(!0),n(M,null,O(s.meal.contraindications,e=>(l(),n("li",{key:e},g(e),1))),128))])]),a("div",Me,[t[4]||(t[4]=a("h3",{class:"font-semibold text-gray-700 mb-2"},"موارد مصرف",-1)),a("ul",Je,[(l(!0),n(M,null,O(s.meal.consumable_items,e=>(l(),n("li",{key:e},g(e),1))),128))])]),a("div",Oe,[t[5]||(t[5]=a("h3",{class:"font-semibold text-gray-700 mb-2"},"محتویات",-1)),a("ul",Le,[(l(!0),n(M,null,O(s.meal.ingredients,e=>(l(),n("li",{key:e.id},g(e.title),1))),128))])]),a("div",Ae,[t[6]||(t[6]=a("h3",{class:"font-semibold text-gray-700 mb-2"},"💡 تخفیف پلن‌ها",-1)),a("ul",Fe,[(l(!0),n(M,null,O(x.value,e=>(l(),n("li",{key:e.plan},g(e.plan)+": "+g(e.discountPercent)+"٪ قیمت پس از تخفیف: "+g(e.priceAfterDiscount.toLocaleString())+" تومان ",1))),128))])])]),a("div",Be,[t[7]||(t[7]=a("h3",{class:"font-semibold text-gray-800 mb-3"},"نظرات شما",-1)),t[8]||(t[8]=a("div",{class:"flex mb-4 gap-2"},[a("input",{type:"text",placeholder:"تو هم نظر خودت رو بزار...",class:"flex-grow p-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"}),a("button",{class:"bg-black text-white px-4 py-2 rounded-lg hover:bg-gray-800 transition"},"ارسال نظر")],-1)),a("div",Ie,[(l(!0),n(M,null,O(d.value,(e,r)=>(l(),n("div",{key:r,class:"flex gap-3 bg-white p-3 rounded-lg border border-gray-200"},[a("div",Ne,[a("div",ze,g(e.user.charAt(0)),1)]),a("div",Ee,[a("span",Ve,g(e.user),1),a("span",Ye,g(e.text),1)])]))),128))])])])])):k("",!0)]))}};var q,G;function qe(){if(G)return q;G=1,q={toJalaali:A,toGregorian:S,isValidJalaaliDate:j,isLeapJalaaliYear:p,jalaaliMonthLength:L,jalCal:x,j2d:P,d2j:w,g2d:C,d2g:T,jalaaliToDateObject:J,jalaaliWeek:_};var s=[-61,9,38,199,426,686,756,818,1111,1181,1210,1635,2060,2097,2192,2262,2324,2394,2456,3178];function A(t,e,r){return Object.prototype.toString.call(t)==="[object Date]"&&(r=t.getDate(),e=t.getMonth()+1,t=t.getFullYear()),w(C(t,e,r))}function S(t,e,r){return T(P(t,e,r))}function j(t,e,r){return t>=-61&&t<=3177&&e>=1&&e<=12&&r>=1&&r<=L(t,e)}function p(t){return I(t)===0}function L(t,e){return e<=6?31:e<=11||p(t)?30:29}function I(t){var e=s.length,r=s[0],o,b,f,y,c;if(t<r||t>=s[e-1])throw new Error("Invalid Jalaali year "+t);for(c=1;c<e&&(o=s[c],b=o-r,!(t<o));c+=1)r=o;return y=t-r,b-y<6&&(y=y-b+d(b+4,33)*33),f=v(v(y+1,33)-1,4),f===-1&&(f=4),f}function x(t,e){var r=s.length,o=t+621,b=-14,f=s[0],y,c,z,h,u,i,D;if(t<f||t>=s[r-1])throw new Error("Invalid Jalaali year "+t);for(D=1;D<r&&(y=s[D],c=y-f,!(t<y));D+=1)b=b+d(c,33)*8+d(v(c,33),4),f=y;return i=t-f,b=b+d(i,33)*8+d(v(i,33)+3,4),v(c,33)===4&&c-i===4&&(b+=1),h=d(o,4)-d((d(o,100)+1)*3,4)-150,u=20+b-h,e?{gy:o,march:u}:(c-i<6&&(i=i-c+d(c+4,33)*33),z=v(v(i+1,33)-1,4),z===-1&&(z=4),{leap:z,gy:o,march:u})}function P(t,e,r){var o=x(t,!0);return C(o.gy,3,o.march)+(e-1)*31-d(e,7)*(e-7)+r-1}function w(t){var e=T(t).gy,r=e-621,o=x(r,!1),b=C(e,3,o.march),f,y,c;if(c=t-b,c>=0){if(c<=185)return y=1+d(c,31),f=v(c,31)+1,{jy:r,jm:y,jd:f};c-=186}else r-=1,c+=179,o.leap===1&&(c+=1);return y=7+d(c,30),f=v(c,30)+1,{jy:r,jm:y,jd:f}}function C(t,e,r){var o=d((t+d(e-8,6)+100100)*1461,4)+d(153*v(e+9,12)+2,5)+r-34840408;return o=o-d(d(t+100100+d(e-8,6),100)*3,4)+752,o}function T(t){var e,r,o,b,f;return e=4*t+139361631,e=e+d(d(4*t+183187720,146097)*3,4)*4-3908,r=d(v(e,1461),4)*5+308,o=d(v(r,153),5)+1,b=v(d(r,153),12)+1,f=d(e,1461)-100100+d(8-b,6),{gy:f,gm:b,gd:o}}function _(t,e,r){var o=J(t,e,r).getDay(),b=o==6?0:-(o+1),f=6+b;return{saturday:w(P(t,e,r+b)),friday:w(P(t,e,r+f))}}function J(t,e,r,o,b,f,y){var c=S(t,e,r);return new Date(c.gy,c.gm-1,c.gd,o||0,b||0,f||0,y||0)}function d(t,e){return~~(t/e)}function v(t,e){return t-~~(t/e)*e}return q}var Ge=qe();const He={dir:"rtl",class:"relative"},Ue={key:0,class:"fixed top-70 left-1/2 transform -translate-x-1/2 bg-orange-500 text-white px-6 py-4 rounded shadow-lg z-50"},We={key:0,class:"fixed inset-0 flex items-center justify-center backdrop-blur-md bg-white/30 z-50"},Qe={class:"bg-white rounded-2xl shadow-2xl max-w-4xl w-11/12 p-6 relative overflow-y-auto max-h-[85vh] flex gap-6"},Ke={class:"flex-1"},Xe={class:"max-w-lg mx-auto mb-4"},Ze={class:"grid grid-cols-5 gap-1 text-xs font-bold text-gray-600 mb-2 text-center"},et=["onClick"],tt={class:"absolute bottom-0 left-0 w-full bg-gray-200 text-[10px] font-bold text-gray-800 text-center rounded-b-sm flex items-center justify-center"},at={key:0},rt={key:1,class:"text-blue-500 text-[10px]"},st={key:0,class:"text-center text-sm text-gray-600 mb-2"},lt={class:"w-64 flex flex-col items-stretch"},nt={class:"font-bold text-lg mt-1"},ot={class:"mt-4 text-xs leading-relaxed"},it={key:0,class:"mt-4"},dt={key:1,class:"mt-4"},ut={class:"mt-4 text-xl font-black"},ct={class:"mt-4 text-lg"},gt={key:2,class:"mt-4"},bt={key:3,class:"mt-4"},ft=5e4,pt=5e3,vt=.3,yt={__name:"Calender",props:{open:Boolean,basePrice:{type:Number,default:2e5}},emits:["update:open","continue"],setup(s,{emit:A}){const S=s,j=A,p=V({get:()=>S.open,set:h=>j("update:open",h)}),L=$(!0),I=["ش","ی","د","س","چ"],x=$([]),P=$([]),w=$("daily"),C=$("---"),T=$(""),_=$(!1),J=$(S.basePrice),d=$(0),v=h=>h.toLocaleString("fa-IR"),t=V(()=>{switch(w.value){case"daily":return"bg-red-600";case"weekly":return"bg-green-600";case"monthly":return"bg-purple-600";default:return"bg-gray-500"}});function e(h=30){const u=[];let i=new Date;for(let m=0;m<h;m++){const F=(i.getDay()+1)%7;if(F<5){const N=Ge.toJalaali(i.getFullYear(),i.getMonth()+1,i.getDate());u.push({gDate:new Date(i),fullDate:i.toISOString().split("T")[0],jDate:N.jd,jMonth:N.jm,jYear:N.jy,isToday:m===0,isSelected:!1,weekdaySatIndex:F})}i.setDate(i.getDate()+1)}const D=[];for(let m=0;m<u.length;m+=5)D.push(u.slice(m,m+5));P.value=D}function r(h){const u=new Date,i=new Date;i.setDate(u.getDate()+1);const D=new Date;D.setDate(u.getDate()+2);const m=new Date(h.gDate);return m.toDateString()===u.toDateString()?"today":m.toDateString()===i.toDateString()?"tomorrow":m.toDateString()===D.toDateString()?"afterTomorrow":"other"}function o(h){const u=h.fullDate,i=r(h);if(i==="afterTomorrow")x.value=x.value.filter(m=>{const F=P.value.flat().find(R=>R.fullDate===m),N=r(F);return N!=="today"&&N!=="tomorrow"});else if((i==="today"||i==="tomorrow")&&x.value.some(F=>{const N=P.value.flat().find(R=>R.fullDate===F);return r(N)==="afterTomorrow"}))return;const D=x.value.indexOf(u);D===-1?x.value.push(u):x.value.splice(D,1),P.value.forEach(m=>m.forEach(F=>F.isSelected=x.value.includes(F.fullDate))),b()}function b(){if(J.value=S.basePrice,d.value=0,T.value="",_.value=!1,x.value.length===0){w.value="daily",C.value="هیچ روزی انتخاب نشده";return}const h=x.value.length;h>=8?(w.value="monthly",C.value="خرید ماهانه",T.value="۴۰٪",_.value=!0):h>=3?(w.value="weekly",C.value="خرید هفتگی",T.value="۲۰٪",_.value=!0):(w.value="daily",C.value="خرید روزانه",T.value="بدون تخفیف",_.value=!1);let u=0;w.value==="weekly"&&(u=.2),w.value==="monthly"&&(u=.4);let i=S.basePrice*(1-u);_.value&&(i*=1-vt),J.value=Math.round(i);const D=w.value==="daily"?ft:pt;d.value=J.value*h+D}function f(h){if(h.isSelected)switch(w.value){case"daily":return"bg-red-500 text-white border-2 border-red-700";case"weekly":return"bg-green-500 text-white border-2 border-green-700";case"monthly":return"bg-purple-500 text-white border-2 border-purple-700";default:return"bg-blue-200 text-black border-2 border-blue-400"}return h.isToday?"border-2 border-blue-500 bg-blue-50 text-gray-800":"bg-white text-gray-800 cursor-pointer border border-gray-300 hover:bg-blue-100"}const y=()=>L.value=window.scrollY<50;K(()=>{e(),window.addEventListener("scroll",y)}),X(()=>{window.removeEventListener("scroll",y)});const c=$(!1);function z(){c.value=!0,setTimeout(()=>c.value=!1,3e3),p.value=!1}return(h,u)=>(l(),n("div",He,[a("button",{onClick:u[0]||(u[0]=i=>p.value=!0),class:B(["fixed top-3/5 transform -translate-y-1/2 transition-all duration-700 z-50 cursor-pointer shadow-lg flex items-center justify-center font-bold text-white left-0",L.value?"px-6 py-3 rounded-r-xl text-base bg-[#4e3356]":"px-4 py-2 rounded-r-xl text-sm opacity-70 bg-[#4e3356] hover:px-6 hover:py-3 hover:text-base hover:opacity-100"])},[a("span",null,g(L.value?"انتخاب روز در تقویم":"تقویم من"),1)],2),Y(Z,{name:"fade"},{default:H(()=>[c.value?(l(),n("div",Ue," خرید شما با موفقیت در تقویم رزرو شد ")):k("",!0)]),_:1}),p.value?(l(),n("div",We,[a("div",Qe,[a("button",{onClick:z,class:"absolute top-2 right-3 text-gray-600 hover:text-black text-xl cursor-pointer","aria-label":"Return"},u[2]||(u[2]=[a("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 inline",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round","aria-hidden":"true"},[a("circle",{cx:"12",cy:"12",r:"10"}),a("path",{d:"M12 8l4 4-4 4m4-4H8"})],-1)])),a("div",Ke,[u[4]||(u[4]=a("h2",{class:"text-2xl font-bold mb-4 text-center"},"انتخاب روز در تقویم کاری",-1)),u[5]||(u[5]=a("p",{class:"mb-2 text-gray-700"}," انتخاب روز مشخص برای خرید محصولات در سایت ایوا. ",-1)),a("div",Xe,[a("div",Ze,[(l(),n(M,null,O(I,i=>a("div",{key:i},g(i),1)),64))]),(l(!0),n(M,null,O(P.value,(i,D)=>(l(),n("div",{key:D,class:"grid grid-cols-5 gap-2 mb-3"},[(l(!0),n(M,null,O(i,m=>(l(),n("div",{key:m.fullDate,onClick:()=>o(m),class:B([f(m),"w-14 h-14 rounded-sm relative transition-colors select-none cursor-pointer group"])},[u[3]||(u[3]=ee('<div class="absolute -top-3 -right-2 flex flex-col items-center" data-v-4682e6ab><span class="text-center text-red-500 text-[12px] font-bold rounded-full leading-none" data-v-4682e6ab> 5 </span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-6 h-6 text-black drop-shadow-sm" data-v-4682e6ab><path fill-rule="evenodd" d="M2.25 2.25a.75.75 0 000 1.5h1.636l1.808 8.138a2.25 2.25 0 002.202 1.762h9.743a2.25 2.25 0 002.15-1.61l1.605-5.743A.75.75 0 0021 5.25H6.832l-.3-1.35A2.25 2.25 0 004.5 2.25H2.25zm16.5 18a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zm-9 0a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0z" clip-rule="evenodd" data-v-4682e6ab></path></svg></div><div class="absolute inset-0 flex items-center justify-end ml-1.5 text-sm font-bold text-gray-900" data-v-4682e6ab> 5 </div>',2)),a("div",tt,[m.isToday?(l(),n("span",rt,"امروز")):(l(),n("span",at,g(m.jDate),1))])],10,et))),128))]))),128))]),x.value.length>0?(l(),n("div",st," روزهای انتخاب شده: "+g(x.value.length)+" روز ",1)):k("",!0)]),a("div",lt,[a("div",{class:B(["h-[400px] rounded-xl p-4 text-white flex flex-col items-center justify-center text-center transition-all duration-500",t.value])},[a("div",null,[u[6]||(u[6]=a("div",{class:"text-sm opacity-90"},"نوع خرید",-1)),a("div",nt,g(C.value),1),a("div",ot,[a("div",null," قیمت پایه (هر روز): "+g(v(S.basePrice))+" تومان ",1),w.value!=="daily"?(l(),n("div",it," تخفیف: "+g(T.value),1)):k("",!0),w.value==="daily"?(l(),n("div",dt,"تخفیف: ۰٪")):k("",!0),a("div",ut,g(v(J.value))+" تومان در روز ",1),a("div",ct," مجموع: "+g(v(d.value))+" تومان ",1),_.value?(l(),n("div",gt," این خرید شامل x% سوبسید شرکت است ")):k("",!0),_.value?k("",!0):(l(),n("div",bt," این خرید شامل x% سوبسید شرکت نیست "))])])],2),a("button",{class:"mt-5 h-12 bg-gray-200 text-black rounded-lg font-bold hover:bg-orange-300 transition-colors cursor-pointer",onClick:u[1]||(u[1]=i=>h.$emit("continue"))}," ادامه خرید ")])])])):k("",!0)]))}},mt=U(yt,[["__scopeId","data-v-4682e6ab"]]),xt={class:"container mx-auto px-6 mb-8"},ht={class:"overflow-x-auto py-2 no-scrollbar"},wt={class:"flex gap-3 w-max"},kt=["onClick"],_t=["src","alt"],Dt={key:0,class:"text-center py-8"},$t={key:1,class:"container mx-auto px-6"},jt={key:0,class:"text-center py-12"},Ct={key:1,class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-8"},St={key:2,class:"mt-10 flex justify-center items-center gap-2 flex-wrap mb-8"},Pt={key:2,class:"px-2 text-gray-500"},Tt=["onClick"],Mt={key:3,class:"px-2 text-gray-500"},Jt={__name:"Index",props:{meals:Object,pagination:Object,filters:Object},setup(s){const A=$(!1),S=$(0),j=$(!1),p=$("همه"),I=te().props.auth?.user||null,x=s;p.value=x.filters?.category||"همه";const P=[{title:"همه",type:"category"},{title:"لاین غذای اقتصادی",image:"/images/food-categories/eco.png",type:"category"},{title:"پک میانوعده",image:"/images/food-types/package.png",type:"category"},{title:"سالاد",image:"/images/food-types/salad.png",type:"category"},{title:"ساندویچ",image:"/images/food-types/sandwich.png",type:"category"},{title:"کیک و نان",image:"/images/food-types/cake.png",type:"category"},{title:"دمنوش و قهوه",image:"/images/food-types/coffee.png",type:"category"},{title:"نوشیدنی",image:"/images/food-types/drinks.png",type:"category"},{title:"اوتمیل",image:"/images/food-types/ot-meal.png",type:"category"},{title:"صبحانه",image:"/images/food-types/breakfast.png",type:"category"},{title:"دسیرت‌ها",image:"/images/food-types/dessert.png",type:"category"}],w=V(()=>{if(!x.pagination)return[];const t=x.pagination.last_page,e=x.pagination.current_page,r=1;let o=Math.max(e-r,1),b=Math.min(e+r,t);e<=3?b=Math.min(5,t):e>=t-2&&(o=Math.max(t-4,1));const f=[];for(let y=o;y<=b;y++)f.push(y);return f}),C=t=>{j.value=!0,p.value=t.title;const e=new URLSearchParams;t.title!=="همه"&&e.append("category",t.title),E.get(`/menu?${e.toString()}`,{},{preserveState:!0,replace:!0,onFinish:()=>{j.value=!1}})},T=()=>{j.value=!0,p.value="همه",E.get("/menu",{},{preserveState:!0,replace:!0,onFinish:()=>{j.value=!1}})},_=t=>{j.value=!0;const e=new URLSearchParams;p.value!=="همه"&&e.append("category",p.value),e.append("page",t),E.get(`/menu?${e.toString()}`,{},{preserveState:!0,replace:!0,onFinish:()=>{j.value=!1}})},J=t=>{E.post("/cart",{meal_id:t.id,quantity:1})},d=t=>{E.get(`/meals/${t.id}`)};function v(t){const e=t&&typeof t=="object"&&"basePrice"in t?Number(t.basePrice):Number(t);S.value=isNaN(e)?0:e,A.value=!0}return(t,e)=>(l(),n(M,null,[Y(W,null,{default:H(()=>[e[8]||(e[8]=a("h1",{class:"text-3xl font-bold text-center text-gray-800 my-10"},"محصولات ایوا",-1)),a("div",xt,[a("div",ht,[a("div",wt,[(l(),n(M,null,O(P,r=>a("button",{key:r.title,onClick:o=>C(r),class:B(["flex items-center gap-2 flex-shrink-0 px-4 py-2 rounded-full border text-sm transition cursor-pointer",p.value===r.title?"bg-blue-500 text-white border-blue-500":"bg-white border-gray-300 text-gray-700 hover:bg-gray-100"])},[r.image?(l(),n("img",{key:0,class:"w-5 h-5 object-contain",src:r.image,alt:r.title},null,8,_t)):k("",!0),a("span",null,g(r.title),1)],10,kt)),64))])])]),j.value?(l(),n("div",Dt,e[5]||(e[5]=[a("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"},null,-1),a("p",{class:"mt-2 text-gray-600"},"در حال بارگذاری...",-1)]))):(l(),n("div",$t,[s.meals.data.length===0?(l(),n("div",jt,[e[6]||(e[6]=a("p",{class:"text-gray-500 text-lg"},"محصولی با فیلتر انتخاب شده یافت نشد.",-1)),a("button",{onClick:T,class:"mt-4 px-6 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition cursor-pointer"}," حذف فیلترها ")])):(l(),n("div",Ct,[(l(!0),n(M,null,O(s.meals.data,r=>(l(),ae(Re,{key:r.id,meal:r,onAddToCart:J,onOpenCalendar:v,onViewDetails:d},null,8,["meal"]))),128))])),e[7]||(e[7]=a("div",{class:"mb-12"},null,-1)),s.meals.data.length>0&&s.pagination.last_page>1?(l(),n("div",St,[s.pagination.current_page>1?(l(),n("button",{key:0,onClick:e[0]||(e[0]=r=>_(s.pagination.current_page-1)),class:"px-4 py-2 rounded-lg border border-gray-300 bg-white hover:bg-gray-100 transition cursor-pointer"}," قبلی ")):k("",!0),s.pagination.current_page>3?(l(),n("button",{key:1,onClick:e[1]||(e[1]=r=>_(1)),class:B(["px-3 py-1 rounded-lg border border-gray-300 cursor-pointer",s.pagination.current_page===1?"bg-blue-500 text-white border-blue-500":"bg-white hover:bg-gray-100"])}," 1 ",2)):k("",!0),s.pagination.current_page>4?(l(),n("span",Pt,"...")):k("",!0),(l(!0),n(M,null,O(w.value,r=>(l(),n("button",{key:r,onClick:o=>_(r),class:B(["px-3 py-1 rounded-lg border border-gray-300 cursor-pointer",r===s.pagination.current_page?"bg-blue-500 text-white border-blue-500":"bg-white hover:bg-gray-100"])},g(r),11,Tt))),128)),s.pagination.current_page<s.pagination.last_page-3?(l(),n("span",Mt,"...")):k("",!0),s.pagination.current_page<s.pagination.last_page-2?(l(),n("button",{key:4,onClick:e[2]||(e[2]=r=>_(s.pagination.last_page)),class:B(["px-3 py-1 rounded-lg border border-gray-300 cursor-pointer",s.pagination.last_page===s.pagination.current_page?"bg-blue-500 text-white border-blue-500":"bg-white hover:bg-gray-100"])},g(s.pagination.last_page),3)):k("",!0),s.pagination.current_page<s.pagination.last_page?(l(),n("button",{key:5,onClick:e[3]||(e[3]=r=>_(s.pagination.current_page+1)),class:"px-4 py-2 rounded-lg border border-gray-300 bg-white hover:bg-gray-100 transition cursor-pointer"}," بعدی ")):k("",!0)])):k("",!0)]))]),_:1,__:[8]}),re(I)?(l(),n(M,{key:0},[Y(se),Y(mt,{open:A.value,"onUpdate:open":e[4]||(e[4]=r=>A.value=r),basePrice:S.value},null,8,["open","basePrice"])],64)):k("",!0)],64))}},It=U(Jt,[["__scopeId","data-v-c1b334e1"]]);export{It as default};
